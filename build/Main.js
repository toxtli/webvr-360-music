webpackJsonp([0],[function(t,e,n){var i;void 0!==(i=function(){"use strict";var t=function(){};t.prototype.toString=function(){for(var e in t){var n=e[0].match(/^[A-Z]$/),i=t[e]===this.constructor;if(t.isFunction(t[e])&&n&&i)return e}return"Tone"},t.prototype.dispose=function(){return t.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},t.prototype.set=function(e,n,i){if(t.isObject(e))i=n;else if(t.isString(e)){var r={};r[e]=n,e=r}t:for(var o in e){n=e[o];var s=this;if(-1!==o.indexOf(".")){for(var a=o.split("."),u=0;u<a.length-1;u++)if((s=s[a[u]])instanceof t){a.splice(0,u+1);var l=a.join(".");s.set(l,n);continue t}o=a[a.length-1]}var c=s[o];t.isUndef(c)||(t.Signal&&c instanceof t.Signal||t.Param&&c instanceof t.Param?c.value!==n&&(t.isUndef(i)?c.value=n:c.rampTo(n,i)):c instanceof AudioParam?c.value!==n&&(c.value=n):c instanceof t?c.set(n):c!==n&&(s[o]=n))}return this},t.prototype.get=function(e){t.isUndef(e)?e=this._collectDefaults(this.constructor):t.isString(e)&&(e=[e]);for(var n={},i=0;i<e.length;i++){var r=e[i],o=this,s=n;if(-1!==r.indexOf(".")){for(var a=r.split("."),u=0;u<a.length-1;u++){var l=a[u];s[l]=s[l]||{},s=s[l],o=o[l]}r=a[a.length-1]}var c=o[r];t.isObject(e[r])?s[r]=c.get():t.Signal&&c instanceof t.Signal?s[r]=c.value:t.Param&&c instanceof t.Param?s[r]=c.value:c instanceof AudioParam?s[r]=c.value:c instanceof t?s[r]=c.get():t.isFunction(c)||t.isUndef(c)||(s[r]=c)}return n},t.prototype._collectDefaults=function(e){var n=[];if(t.isUndef(e.defaults)||(n=Object.keys(e.defaults)),!t.isUndef(e._super))for(var i=this._collectDefaults(e._super),r=0;r<i.length;r++)-1===n.indexOf(i[r])&&n.push(i[r]);return n},t.defaults=function(e,n,i){var r={};if(1===e.length&&t.isObject(e[0]))r=e[0];else for(var o=0;o<n.length;o++)r[n[o]]=e[o];return t.isUndef(i.defaults)?r:t.defaultArg(r,i.defaults)},t.defaultArg=function(e,n){if(t.isObject(e)&&t.isObject(n)){var i={};for(var r in e)i[r]=t.defaultArg(n[r],e[r]);for(var o in n)i[o]=t.defaultArg(e[o],n[o]);return i}return t.isUndef(e)?n:e},t.prototype.connect=function(e,n,i){return t.isArray(this.output)?(n=t.defaultArg(n,0),this.output[n].connect(e,0,i)):this.output.connect(e,n,i),this},t.prototype.disconnect=function(e,n,i){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(n=t.defaultArg(n,0),this.output[n].disconnect(e,0,i)):this.output.disconnect.apply(this.output,arguments)},t.prototype.chain=function(){for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},t.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},t.connectSeries=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var i=arguments[n];e.connect(i),e=i}return t},window.AudioNode&&(AudioNode.prototype.chain=t.prototype.chain,AudioNode.prototype.fan=t.prototype.fan),t.isUndef=function(t){return void 0===t},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},t.isBoolean=function(t){return"boolean"==typeof t},t.isArray=function(t){return Array.isArray(t)},t.isString=function(t){return"string"==typeof t},t.isNote=function(e){return t.isString(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)},t.noOp=function(){},t.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},t.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},t.State={Started:"started",Stopped:"stopped",Paused:"paused"},t.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},t.dbToGain=function(t){return Math.pow(2,t/6)},t.gainToDb=function(t){return Math.log(t)/Math.LN10*20},t.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},t.prototype.now=function(){return t.context.now()},t.now=function(){return t.context.now()},t.extend=function(e,n){function i(){}t.isUndef(n)&&(n=t),i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e,e._super=n};var e;return Object.defineProperty(t,"context",{get:function(){return e},set:function(n){e=t.Context&&n instanceof t.Context?n:new t.Context(n),t.Context.emit("init",e)}}),Object.defineProperty(t.prototype,"context",{get:function(){return t.context}}),t.setContext=function(e){t.context=e},Object.defineProperty(t.prototype,"numberOfInputs",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.prototype,"numberOfOutputs",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),Object.defineProperty(t.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(t.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(t,"supported",{get:function(){var t=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),e=window.hasOwnProperty("Promise"),n=window.hasOwnProperty("Worker");return t&&e&&n}}),t.version="r11-dev",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+t.version+" * ","background: #000; color: #fff"),t}.call(e,n,e,t))&&(t.exports=i)},,function(t,e,n){var i,r;i=[n(0),n(9),n(8),n(34),n(3)],void 0!==(r=function(t){"use strict";return t.Signal=function(){var e=t.defaults(arguments,["value","units"],t.Signal),n=t.context.createGain();e.param=n.gain,t.Param.call(this,e),this.output=n,this.input=this._param=this.output.gain,this.context.getConstant(1).chain(this.output)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this},t.Signal}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(34),n(8)],void 0!==(r=function(t){"use strict";return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=t.defaults(arguments,["gain","units"],t.Gain);t.call(this),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.prototype.createInsOuts=function(e,n){1===e?this.input=new t.Gain:e>1&&(this.input=new Array(e)),1===n?this.output=new t.Gain:n>1&&(this.output=new Array(n))},t.Gain}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=location.hash.substr(1),n=e.split(","),i=parseInt(n[1]);return{artist:"PLAY",track:"SONG",folder:n[0],intro:"song",segments:parseInt(i/30),duration:i,trackNames:["other","piano","drums","null","vocals","null","bass"],names:["other","piano","drums","null","vocals","null","bass"],soundRings:{startColor:"#f7002d",endColor:"#00edaa",shape:"triangle",size:8},floor:{color:"#253934"}}}Object.defineProperty(e,"__esModule",{value:!0}),e.trackConfig=e.supported=e.useVoiceOver=e.trackRadius=e.title=e.tubeColor=e.sceneColor=e.radius=e.circleHeight=e.unitsPerSecond=void 0,e.getTrackData=r;var o=n(0),s=(i(o),n(54));i(s),e.unitsPerSecond=7,e.circleHeight=0,e.radius=1.1,e.sceneColor="#faa",e.tubeColor="#ffffff",e.title="Inside Music",e.trackRadius=2,e.useVoiceOver=!0,e.supported=!0,e.trackConfig=[{artist:"PLAYING",track:"SONG",folder:"america",intro:"song",segments:8,duration:240,trackNames:["other","piano","drums","null","vocals","null","bass"],names:["other","piano","drums","null","vocals","null","bass"],soundRings:{startColor:"#f7002d",endColor:"#00edaa",shape:"triangle",size:8},floor:{color:"#253934"}}]},function(t,e,n){var i,r;i=[n(0),n(14),n(8)],void 0!==(r=function(t){"use strict";return window.AudioBuffer&&!AudioBuffer.prototype.copyToChannel&&(AudioBuffer.prototype.copyToChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<i.length;r++)i[r+n]=t[r]},AudioBuffer.prototype.copyFromChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<t.length;r++)t[r]=i[r+n]}),t.Buffer=function(){var e=t.defaults(arguments,["url","onload","onerror"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):t.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,n,i){return new Promise(function(r,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),r(this),n&&n(this)}.bind(this),function(t){this._xhr=null,o(t),i&&i(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=this.context.createBuffer(n,i,this.context.sampleRate);e||1!==n||(t=[t]);for(var o=0;o<n;o++)r.copyToChannel(t[o],o);return this._buffer=r,this},t.Buffer.prototype.toMono=function(e){if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(var n=new Float32Array(this.length),i=this.numberOfChannels,r=0;r<i;r++)for(var o=this.toArray(r),s=0;s<o.length;s++)n[s]+=o[s];n=n.map(function(t){return t/i}),this.fromArray(n)}return this},t.Buffer.prototype.toArray=function(e){if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var n=[],i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,n){n=t.defaultArg(n,this.duration);for(var i=Math.floor(this.context.sampleRate*this.toSeconds(e)),r=Math.floor(this.context.sampleRate*this.toSeconds(n)),o=[],s=0;s<this.numberOfChannels;s++)o[s]=this.toArray(s).slice(i,r);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl="",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer._removeFromDownloadQueue=function(e){var n=t.Buffer._downloadQueue.indexOf(e);-1!==n&&t.Buffer._downloadQueue.splice(n,1)},t.Buffer.load=function(e,n,i){function r(e){if(t.Buffer._removeFromDownloadQueue(c),t.Buffer.emit("error",e),!i)throw e;i(e)}function o(){for(var e=0,n=0;n<t.Buffer._downloadQueue.length;n++)e+=t.Buffer._downloadQueue[n].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}n=t.defaultArg(n,t.noOp);var s=e.match(/\[(.+\|?)+\]$/);if(s){for(var a=s[1].split("|"),u=a[0],l=0;l<a.length;l++)if(t.Buffer.supportsType(a[l])){u=a[l];break}e=e.replace(s[0],u)}var c=new XMLHttpRequest;return c.open("GET",t.Buffer.baseUrl+e,!0),c.responseType="arraybuffer",c.progress=0,t.Buffer._downloadQueue.push(c),c.addEventListener("load",function(){200===c.status?t.context.decodeAudioData(c.response,function(e){c.progress=1,o(),n(e),t.Buffer._removeFromDownloadQueue(c),0===t.Buffer._downloadQueue.length&&t.Buffer.emit("load")},function(){t.Buffer._removeFromDownloadQueue(c),r("Tone.Buffer: could not decode audio data: "+e)}):r("Tone.Buffer: could not locate file: "+e)}),c.addEventListener("error",r),c.addEventListener("progress",function(t){t.lengthComputable&&(c.progress=t.loaded/t.total*.95,o())}),c.send(),c},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},t.loaded=function(){function e(){t.Buffer.off("load",n),t.Buffer.off("error",i)}var n,i;return new Promise(function(e,r){n=function(){e()},i=function(){r()},t.Buffer.on("load",n),t.Buffer.on("error",i)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(91),n(8),n(15),n(14),n(3),n(94)],void 0!==(r=function(t){"use strict";t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var n=this._clock.ticks;if(this._swingAmount>0&&n%this._ppq!=0&&n%(2*this._swingTicks)!=0){var i=n%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(i*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i")*r}this.loop&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.ticks=this._loopStart,n=this._loopStart,this.emit("loopStart",e,this.seconds),this.emit("loop",e)),this._onceEvents.forEachBefore(n,function(t){t.callback(e),delete this._scheduledEvents[t.id.toString()]}.bind(this)),this._onceEvents.cancelBefore(n),this._timeline.forEachAtTime(n,function(t){t.callback(e)}),this._repeatedEvents.forEachAtTime(n,function(t){(n-t.time)%t.interval==0&&t.callback(e)})},t.Transport.prototype.schedule=function(t,e){var n={time:this.toTicks(e),callback:t},i=this._eventID++;return this._scheduledEvents[i.toString()]={event:n,timeline:this._timeline},this._timeline.add(n),i},t.Transport.prototype.scheduleRepeat=function(e,n,i,r){if(n<=0)throw new Error("Tone.Transport: repeat events must have an interval larger than 0");var o={time:this.toTicks(i),duration:this.toTicks(t.defaultArg(r,1/0)),interval:this.toTicks(n),callback:e},s=this._eventID++;return this._scheduledEvents[s.toString()]={event:o,timeline:this._repeatedEvents},this._repeatedEvents.add(o),s},t.Transport.prototype.scheduleOnce=function(t,e){var n=this._eventID++,i={time:this.toTicks(e),callback:t,id:n};return this._scheduledEvents[n.toString()]={event:i,timeline:this._onceEvents},this._onceEvents.add(i),n},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.cancel(e),this._onceEvents.cancel(e),this._repeatedEvents.cancel(e),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,n){n=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,n)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,n){return t.isUndef(n)||(n=this.toTicks(n)),this._clock.start(e,n),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var n=this.now();this.state===t.State.Started?(this.emit("stop",n),this._clock.ticks=e,this.emit("start",n,this.seconds)):this._clock.ticks=e}}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var n;if(this.state!==t.State.Started)return 0;n=this._clock._nextTick;var i=t.Time(this.ticks,"i"),r=e-i%e;return 0===r&&(r=e),n+r},t.Transport.prototype.syncSignal=function(e,n){n||(n=0!==e._param.value?e._param.value/this.bpm._param.value:0);var i=new t.Gain(n);return this.bpm.chain(i,e._param),this._syncedSignals.push({ratio:i,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal._param.value=n.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on("init",function(n){n.Transport instanceof e?t.Transport=n.Transport:t.Transport=new e,n.Transport=t.Transport}),t.Context.on("close",function(t){t.Transport instanceof e&&t.Transport.dispose()}),t.Transport}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function r(t){navigator.getVRDisplays().then(function(e){t(e.length>0&&e[0].isPresenting?null===e[0].stageParameters?"3dof":"6dof":"viewer")}).catch(function(){t("viewer")})}Object.defineProperty(e,"__esModule",{value:!0}),e.getParameterByName=i,e.getViewerType=r;var o=(e.valueExists=function(t,e){return!!Object.keys(t).filter(function(n){return t[n]===e}).length},e.values=function(t){return Object.keys(t).map(function(e){return t[e]})},e.isMobile=function(){return document.querySelector("a-scene").isMobile},e.isTablet=function(){return Math.max(window.screen.width,window.screen.height)/Math.min(window.screen.width,window.screen.height)<1.35&&!/(Oculus|Gear)/.test(navigator.userAgent)},e.is360=function(){return document.querySelector("a-scene").classList.contains("is360")},e.getHeadset=function(){var t=document.querySelector("[headset]");return t&&t.getAttribute("headset")});e.isDaydream=function(){return o()&&o().toLowerCase().indexOf("daydream")>=0},e.empty=function(t){for(;t.length;)t.splice(0,1);return t},e.pluck=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.forEach(function(t){n.push(t[e])}),n},e.diff=function(t,e){if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1};Document.prototype.createElementWithAttributes=function(t,e){var n=Document.prototype.createElement.call(this,String(t));for(var i in e)n.setAttribute(i.replace(/[A-Z]/g,"-$&"),e[i]);return n},window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)});var s=(e.clamp=function(t,e,n){return Math.min(n,Math.max(t,e))},e.stringToHex=function(t){return Number("0x"+t.slice(1,t.length))},e.take=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0;i<t;i++)n[i]=e(i,t);return n},e.lerp=function(t,e,n){return t*(1-n)+e*n},e.rand=function(t,e){return void 0===e&&(void 0===t&&(t=-1,e=1),e=t,t*=-1),Math.random()*(e-t)+t});e.randVector3=function(t,e){return new THREE.Vector3(s(t,e),s(t,e),s(t,e))},e.map=function(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}},function(t,e,n){var i,r;i=[n(0),n(30),n(62),n(63),n(19)],void 0!==(r=function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(33)],void 0!==(r=function(t){"use strict";return t.WaveShaper=function(e,n){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(n,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,n=this._curve.length;e<n;e++){var i=e/(n-1)*2-1;this._curve[e]=t(i,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}.apply(e,i))&&(t.exports=r)},,,function(t,e,n){"use strict";function i(t){console&&console.warn&&console.warn(t)}function r(){r.init.call(this)}function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function s(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function a(t,e,n,r){var a,u,l;if(o(n),u=t._events,void 0===u?(u=t._events=Object.create(null),t._eventsCount=0):(void 0!==u.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),u=t._events),l=u[e]),void 0===l)l=u[e]=n,++t._eventsCount;else if("function"==typeof l?l=u[e]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),(a=s(t))>0&&l.length>a&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=l.length,i(c)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function c(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?d(r):p(r,r.length)}function h(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function f(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function d(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}var m,v="object"==typeof Reflect?Reflect:null,g=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};m=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var y=Number.isNaN||function(t){return t!==t};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var _=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(t){if("number"!=typeof t||t<0||y(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||y(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return s(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)g(a,this,e);else for(var u=a.length,l=p(a,u),n=0;n<u;++n)g(l[n],this,e);return!0},r.prototype.addListener=function(t,e){return a(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return a(this,t,e,!0)},r.prototype.once=function(t,e){return o(e),this.on(t,l(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,l(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,i,r,s,a;if(o(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():f(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},r.prototype.listeners=function(t){return c(this,t,!0)},r.prototype.rawListeners=function(t){return c(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},,function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){"use strict";return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var n=t.split(/\W+/),i=0;i<n.length;i++){var r=n[i];this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}return this},t.Emitter.prototype.off=function(e,n){for(var i=e.split(/\W+/),r=0;r<i.length;r++)if(e=i[r],this._events.hasOwnProperty(e))if(t.isUndef(n))this._events[e]=[];else for(var o=this._events[e],s=0;s<o.length;s++)o[s]===n&&o.splice(s,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var n=this._events[t],i=0,r=n.length;i<r;i++)n[i].apply(this,e)}return this},t.Emitter.mixin=function(e){var n=["on","off","emit"];e._events={};for(var i=0;i<n.length;i++){var r=n[i],o=t.Emitter.prototype[r];e[r]=o}return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){"use strict";return t.Timeline=function(){var e=t.defaults(arguments,["memory"],t.Timeline);t.call(this),this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){if(t.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var n=this._search(e.time);this._timeline.splice(n+1,0,e)}else this._timeline.push(e);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(e,n){n=t.defaultArg(n,"time");var i=this._search(e,n);return-1!==i?this._timeline[i]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,n){n=t.defaultArg(n,"time");var i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null},t.Timeline.prototype.getBefore=function(e,n){n=t.defaultArg(n,"time");var i=this._timeline.length;if(i>0&&this._timeline[i-1][n]<e)return this._timeline[i-1];var r=this._search(e,n);return r-1>=0?this._timeline[r-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,n){n=t.defaultArg(n,"time");var i=0,r=this._timeline.length,o=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;i<o;){var s=Math.floor(i+(o-i)/2),a=this._timeline[s],u=this._timeline[s+1];if(a[n]===e){for(var l=s;l<this._timeline.length;l++){this._timeline[l][n]===e&&(s=l)}return s}if(a[n]<e&&u[n]>e)return s;a[n]>e?o=s:i=s+1}return-1},t.Timeline.prototype._iterate=function(e,n,i){this._iterating=!0,n=t.defaultArg(n,0),i=t.defaultArg(i,this._timeline.length-1);for(var r=n;r<=i;r++)e.call(this,this._timeline[r]);if(this._iterating=!1,this._toRemove.length>0){for(var o=0;o<this._toRemove.length;o++){var s=this._timeline.indexOf(this._toRemove[o]);-1!==s&&this._timeline.splice(s,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},t.Timeline.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e.call(this,n)},0,n),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null,this},t.Timeline}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(22),n(19)],void 0!==(r=function(t){"use strict";t.Master=function(){t.call(this),this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},window.AudioNode&&(AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this});var e=t.Master;return t.Master=new e,t.Context.on("init",function(n){n.Master instanceof e?t.Master=n.Master:t.Master=new e,n.Master=t.Master}),t.Context.on("close",function(t){t.Master instanceof e&&t.Master.dispose()}),t.Master}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(2),n(3)],void 0!==(r=function(t){"use strict";return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=t.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}.apply(e,i))&&(t.exports=r)},,function(t,e,n){var i,r;i=[n(0),n(14),n(15)],void 0!==(r=function(t){!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(){t.Emitter.call(this);var n=t.defaults(arguments,["context"],t.Context);n.context||(n.context=new window.AudioContext),this._context=n.context;for(var i in this._context)this._defineProperty(this._context,i);this._latencyHint=n.latencyHint,this._constants={},this.lookAhead=n.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this))},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},t.Context.prototype._defineProperty=function(e,n){t.isUndef(this[n])&&Object.defineProperty(this,n,{get:function(){return"function"==typeof e[n]?e[n].bind(e):e[n]},set:function(t){e[n]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants[t]=r,r},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,time:n+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var n=e;if(this._latencyHint=e,t.isString(e))switch(e){case"interactive":n=.1,this._context.latencyHint=e;break;case"playback":n=.8,this._context.latencyHint=e;break;case"balanced":n=.25,this._context.latencyHint=e;break;case"fastest":this._context.latencyHint="interactive",n=.01}this.lookAhead=n,this.updateInterval=n/3}}),t.Context.prototype.dispose=function(){t.Context.emit("close",this),t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null;for(var e in this._constants)this._constants[e].disconnect();return this._constants=null,this.close(),this};var e=function(e,n,i){this._type=n,this._updateInterval=i,this._callback=t.defaultArg(e,t.noOp),this._createClock()};return e.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},e.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.supported?(!function(){function e(e,n,r){if(e.input)r=t.defaultArg(r,0),t.isArray(e.input)?this.connect(e.input[r]):this.connect(e.input,n,r);else try{e instanceof AudioNode?i.call(this,e,n,r):i.call(this,e,n)}catch(t){throw new Error("error connecting to node: "+e+"\n"+t)}}function n(e,n,i){if(e&&e.input&&t.isArray(e.input))i=t.defaultArg(i,0),this.disconnect(e.input[i],n,0);else if(e&&e.input)this.disconnect(e.input,n,i);else try{r.apply(this,arguments)}catch(t){throw new Error("error disconnecting node: "+e+"\n"+t)}}var i=AudioNode.prototype.connect,r=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=n)}(),t.context=new t.Context):console.warn("This browser does not support Tone.js"),t.Context}.apply(e,i))&&(t.exports=r)},function(t,e,n){function i(){return!0}function r(t){var e=1e3/t,n=Date.now();if(t<=0||t===1/0)return i;var r=Math.ceil(1e3/60)/2;return function(){var t=Date.now();return!(t-n<e-r)&&(n=t,!0)}}function o(t){t=t||{},this.__delay=t.delay||0,this.fixedDelta=!!t.fixedDelta,this.frameCount=0,this.deltaTime=0,this.elapsedTime=0,this.__running=!1,this.__completed=!1,this.setFPS(t.fps||1/0),this.setRequestAnimationFrameObject(t.requestAnimationFrameObject||d)}function s(t){var n,i=Date.now();if(t.__running)return t;e.running+=1,t.__running=!0,t.__lastTime=i,t.deltaTime=0,t.emit("start",t.deltaTime,0,t.frameCount);var r=t.requestAnimationFrameObject,o=function(){if(r!==t.requestAnimationFrameObject)return r=t.requestAnimationFrameObject,void t.requestAnimationFrameObject.requestAnimationFrame(o);t.__isReadyForUpdate()&&t.update(),t.__running?n=t.requestAnimationFrameObject.requestAnimationFrame(o):t.requestAnimationFrameObject.cancelAnimationFrame(n)};return t.requestAnimationFrameObject.requestAnimationFrame(o),t}function a(t,e){1===arguments.length&&"function"==typeof t&&(e=t,t={});var n=new o(t);return e&&n.on("update",e),n}function u(t,e){return"function"==typeof t.bind?t.bind(e):function(){return t.apply(e,arguments)}}function l(t){for(var e=Object.keys(t),n=[],i=0;i<e.length;i++)"function"==typeof t[e[i]]&&n.push(e[i]);return n}var c,h=n(12).EventEmitter,p=n(64),f=n(65),d={requestAnimationFrame:f,cancelAnimationFrame:f.cancel};p(o,h),c={off:h.prototype.removeListener,trigger:h.prototype.emit,complete:function(){return this.stop(),this.__completed=!0,this.emit("complete",this.frameCount,this.deltaTime),this},dispose:function(){return this.stop(),this.removeAllListeners(),this},getDeltaTime:function(){return this.deltaTime},getElapsedTime:function(){return this.elapsedTime},getFPS:function(){return this.deltaTime>0?1e3/this.deltaTime:0},getFPSLimit:function(){return this.__fps},getFrameCount:function(){return this.frameCount},getRequestAnimationFrameObject:function(){return this.requestAnimationFrameObject},isRunning:function(){return this.__running},isCompleted:function(){return this.__completed},reset:function(){return this.stop(),this.__completed=!1,this.__lastTime=0,this.deltaTime=0,this.elapsedTime=0,this.frameCount=0,this.emit("reset",0,0,this.frameCount),this},setFPS:function(t){return this.__fps=t,this.__isReadyForUpdate=r(t),this},setRequestAnimationFrameObject:function(t){if("function"!=typeof t.requestAnimationFrame||"function"!=typeof t.cancelAnimationFrame)throw new Error("Invalid object provide to `setRequestAnimationFrameObject`");return this.requestAnimationFrameObject=t,this},start:function(){var t=this;return this.__delay?setTimeout(function(){s(t)},this.__delay):s(this),this},stop:function(){return this.__running&&(this.__running=!1,e.running-=1,this.emit("stop",this.deltaTime,this.elapsedTime,this.frameCount)),this},update:function(){this.frameCount++;var t=Date.now();return this.__lastTime=this.__lastTime||t,this.deltaTime=this.fixedDelta||e.globalFixedDelta?1e3/Math.min(60,this.__fps):t-this.__lastTime,this.elapsedTime+=this.deltaTime,this.__lastTime=t,this.emit("update",this.deltaTime,this.elapsedTime,this.frameCount),this}};for(var m in c)o.prototype[m]=c[m];t.exports=e=a,e.bound=function(t,e){for(var n,i=a(t,e),r=l(o.prototype),s=!!Function.prototype.bind,c=0;c<r.length;c++)n=r[c],i[n]=s?i[n].bind(i):u(i[n],i);return i},e.Animitter=o,e.globalFixedDelta=!1,e.EventEmitter=h,e.running=0,Date.now=Date.now||function(){return(new Date).getTime()}},function(t,e,n){"use strict";function i(t,e,n,i){window.googleAnalytics&&(void 0!==i?window.googleAnalytics("send","event",t,e,n,i):window.googleAnalytics("send","event",t,e,n))}Object.defineProperty(e,"__esModule",{value:!0}),e.GA=i;var r=n(18),o=function(t){return t&&t.__esModule?t:{default:t}}(r);n(4);(0,o.default)(function(){var t=document.querySelector("a-scene"),e=null,n=0,r=0;t.addEventListener("menu-selection",function(t){e=t.detail.artist.split(" ").join("-"),n++,i(e,"select","order-selected-"+n)}),t.addEventListener("song-end",function(t){r++,i(e,"end","complete-plays-"+r)}),t.addEventListener("sphere-click",function(t){i(e,t.detail.active?"stem-on":"stem-off","position-"+t.detail.index)})})},function(t,e,n){var i,r;i=[n(0),n(2),n(3)],void 0!==(r=function(t){"use strict";return t.Volume=function(){var e=t.defaults(arguments,["volume"],t.Volume);t.call(this),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}.apply(e,i))&&(t.exports=r)},function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nvarying vec2 vUv;\nvoid main(){\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},function(t,e,n){var i,r;i=[n(0),n(5),n(38),n(3)],void 0!==(r=function(t){return window.AudioBufferSourceNode&&!AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn,AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),t.BufferSource=function(){var e=t.defaults(arguments,["buffer","onload"],t.BufferSource);t.call(this),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this._gain=1,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate.value=e.playbackRate},t.extend(t.BufferSource),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,playbackRate:1},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return-1!==this._startTime&&e>=this._startTime&&e<this._stopTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(e,n,i,r,o){if(-1!==this._startTime)throw new Error("Tone.BufferSource can only be started once.");if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");e=this.toSeconds(e),n=this.loop?t.defaultArg(n,this.loopStart):t.defaultArg(n,0),n=this.toSeconds(n),e=this.toSeconds(e),r=t.defaultArg(r,1),this._gain=r,o=t.isUndef(o)?this.toSeconds(this.fadeIn):this.toSeconds(o),o>0?(this._gainNode.gain.setValueAtTime(0,e),this._gainNode.gain.linearRampToValueAtTime(this._gain,e+o)):this._gainNode.gain.setValueAtTime(r,e),this._startTime=e+o;var s=t.defaultArg(i,this.buffer.duration-n);if(s=this.toSeconds(s),s=Math.max(s,0),(!this.loop||this.loop&&!t.isUndef(i))&&(this.loop||(s=Math.min(s,this.buffer.duration-n)),this.stop(e+s+o,this.fadeOut)),this.loop){var a=this.loopEnd||this.buffer.duration,u=this.loopStart,l=a-u;n>a&&(n=(n-u)%l+u)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,this._source.start(e,n),this},t.BufferSource.prototype.stop=function(e,n){if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");if(e=this.toSeconds(e),n=t.isUndef(n)?this.toSeconds(this.fadeOut):this.toSeconds(n),-1===this._stopTime||this._stopTime>e){if(this._stopTime=e,this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),e=Math.max(this._startTime,e),n>0){var i=Math.max(this._startTime,e-n);this._gainNode.gain.setValueAtTime(this._gain,i),this._gainNode.gain.linearRampToValueAtTime(0,e)}else this._gainNode.gain.setValueAtTime(0,e);t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now())}return this},t.BufferSource.prototype._onended=function(){this.onended(this)},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return t.prototype.dispose.call(this),this.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(41),n(42),n(2),n(3)],void 0!==(r=function(t){"use strict";return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(9),n(2)],void 0!==(r=function(t){"use strict";return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}.apply(e,i))&&(t.exports=r)},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SplashScene=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(7),a=n(29),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(a),l=n(5),c=(i(l),n(20)),h=i(c),p=n(32),f=(i(p),n(70)),d=i(f);n(71),n(72),n(73),n(74),n(75),n(76),n(77);var m=function(){return new Promise(function(t){})};e.SplashScene=function(){function t(e){var n=this;r(this,t);var i=new THREE.Scene,o=new THREE.PerspectiveCamera(65,window.innerWidth/window.innerHeight,.001,1e4);o.position.set(0,-10,0),o.lookAt(new THREE.Vector3(0,0,0));var a=new THREE.WebGLRenderer({canvas:e});a.setClearColor(0,1),a.setSize(window.innerWidth,window.innerHeight),u.geometryPool.clear();var l=(0,s.take)(96,function(t,e){return new u.RingPoints({radius:.05*t+.5,resolution:120,color:new THREE.Color(65280).setHSL(t/e,1,.75),opacity:Math.min(1,(0,s.map)(e-t,e,1,4,.3)),size:38,transparent:!0})});l.forEach(function(t){return t.rotateX(-Math.PI/2.5)}),window.rings=l;var c=l.map(function(t){return new Float32Array(128)}),p=function(t,e,n,i){for(var r=0,o=0;o<i;o++)e[o]=t[n+o],r+=e[o];return r/i},f=0;this.loop=(0,h.default)(function(t,e,n){var i=c.pop(),r=p(g,i,(v+=128)%g.length,128);isNaN(r)||(f=Math.max(f,f+.3*(r-f)));var o=(0,s.clamp)(window.innerWidth*window.innerHeight/1764e3,.5,3);b.strength=(0,s.map)(f,-1,1,.5,1)*o,c.unshift(i),l.forEach(function(t,e){t.material.uniforms.waveform.value=c[e]})}),this.loop.on("update",function t(e,n){for(var i=(0,s.clamp)((n-500)/8e3,0,1),r=0;r<l.length;r++)l[r].transitionStep((0,d.default)(i));i>=1&&this.removeListener("update",t)}),this.__removeListeners=function(t){var e=l[0].rotation.x,i=(l[0].rotation.x,l[0].rotation.x,Math.PI,l[0].rotation.x,Math.PI,function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.005;return(0,s.clamp)((0,s.map)(t,0,e,n,i),n,i)});n.loop.on("update",function(t,n){var r=(e-l[0].rotation.x)*i(n,1e4);l.forEach(function(t){return t.rotation.x+=r})})}();var v=0,g=[];m().then(function(t){g=t,c.forEach(function(t,e){return p(g,t,v=128*e,128)})});var y=new THREE.EffectComposer(a);y.setSize(window.innerWidth,window.innerHeight);var _=new THREE.RenderPass(i,o);y.addPass(_);var b=new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.5,.8,.4);y.addPass(b);var T=new THREE.ShaderPass(THREE.CopyShader);T.renderToScreen=!0,y.addPass(T),a.gammaInput=!0,a.gammaOutput=!0,window.bloom=b,window.addEventListener("resize",function(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),y.setSize(window.innerWidth,window.innerHeight),b.resolution.set(window.innerWidth,window.innerHeight)}),l.forEach(function(t){return i.add(t)}),l.forEach(function(t){return t.material.uniforms.amplitude.value=1.2}),l.forEach(function(t){return t.transitionStep(0)})}return o(t,[{key:"start",value:function(){return this.loop.start(),this}},{key:"stop",value:function(){return this.loop.stop(),this}},{key:"close",value:function(){this.stop(),this.loop.reset()}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RingPoints=e.geometryPool=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(7),l=n(60),c=i(l),h=n(61),p=i(h),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t.resolution=t.resolution||128,t.color=t.color||new THREE.Color(1,1,1),t.opacity=void 0!==t.opacity?t.opacity:1,t.size=t.size||1,t.blending=t.blending||THREE.NormalBlending,t.shape=t.shape||"circle",t.radius=t.radius||1;for(var n=new Float32Array(t.resolution),i=0;i<t.resolution;i++)n[i]=0;return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{fog:!0,blending:t.blending,defines:{WAVEFORM_RESOLUTION:t.resolution},vertexShader:c.default,fragmentShader:p.default,transparent:!0,uniforms:{shape:{type:"t",value:(new THREE.TextureLoader).load("images/textures/"+t.shape+".png")},radius:{type:"f",value:t.radius},size:{type:"f",value:t.size},color:{type:"c",value:t.color},opacity:{type:"f",value:t.opacity},waveform:{type:"fv1",value:n},amplitude:{type:"f",value:1},fogNear:{type:"f",value:0},fogFar:{type:"f",value:0},fogColor:{type:"c",value:new THREE.Color}}}))}return s(e,t),e}(THREE.RawShaderMaterial),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,new THREE.BufferGeometry));n.resolution=t;var i=new Float32Array(3*t),s=new THREE.BufferAttribute(i,3);n.addAttribute("position",s);for(var a=new Float32Array(t),u=0;u<t;u++)a[u]=u/t;var l=new THREE.BufferAttribute(a,1);return n.addAttribute("reference",l),n.boundingSphere=new THREE.Sphere(new THREE.Vector3(0,0,0),.52),n}return s(e,t),e}(THREE.BufferGeometry);e.geometryPool=function(){function t(t){var e=""+t;for(n[e]=n[e]||[];n[e].length<2;)n[e].push(new d(1,t));return n[e][1]}function e(){n={}}var n={};return{get:t,clear:e}}(),e.RingPoints=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),void 0===t.useCache&&(t.useCache=!0),void 0!==t.useCache&&delete t.useCache;var n=new d(t.resolution),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,new f(t)));return i.renderOrder=2,i.__goalProperties={radius:i.material.uniforms.radius.value,opacity:i.material.uniforms.opacity.value},i}return s(e,t),a(e,[{key:"transitionStep",value:function(t){for(var e in this.__goalProperties){this.material.uniforms[e].value=(0,u.lerp)(0,this.__goalProperties[e],t)}}}]),e}(THREE.Points)},function(t,e,n){var i,r;i=[n(0),n(31)],void 0!==(r=function(t){return t.Time=function(e,n){if(!(this instanceof t.Time))return new t.Time(e,n);this._plusNow=!1,t.TimeBase.call(this,e,n)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(e,n){return n=t.defaultArg(n,1),this._expr=function(t,e,n){return t=t(),e=e.toSeconds(),t+(Math.round(t/e)*e-t)*n}.bind(this,this._expr,new this.constructor(e),n),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],n=this._toNotationHelper(t,e),i=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],r=this._toNotationHelper(t,i);return r.split("+").length<n.split("+").length?r:n},t.Time.prototype._toNotationHelper=function(t,e){for(var n=this._notationToUnits(e[e.length-1]),i="",r=0;r<e.length;r++){var o=this._notationToUnits(e[r]),s=t/o;if(1-s%1<1e-6&&(s+=1e-6),(s=Math.floor(s))>0){if(i+=1===s?e[r]:s.toString()+"*"+e[r],(t-=s*o)<n)break;i+=" + "}}return""===i&&(i="0"),i},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,n=[e.n,e.t,e.m],i=0;i<n.length;i++){var r=n[i],o=t.match(r.regexp);if(o)return r.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,n=Math.floor(e/this._timeSignature()),i=e%1*4;return e=Math.floor(e)%this._timeSignature(),i=i.toString(),i.length>3&&(i=parseFloat(i).toFixed(3)),[n,e,i].join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){return t.TimeBase=function(e,n){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,n);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!t.isUndef(n)||t.isNumber(e)){n=t.defaultArg(n,this._defaultUnits);var i=this._primaryExpressions[n].method;this._expr=i.bind(this,e)}else t.isString(e)?this.set(e):t.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e=-1,n=[];t.length>0;){t=t.trim();var i=function(t,e){for(var n=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],i=0;i<n.length;i++){var r=e[n[i]];for(var o in r){var s=r[o],a=s.regexp,u=t.match(a);if(null!==u)return{method:s.method,precedence:s.precedence,regexp:s.regexp,value:u[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}(t,this);n.push(i),t=t.substr(i.value.length)}return{next:function(){return n[++e]},peek:function(){return n[e+1]}}},t.TimeBase.prototype._matchGroup=function(e,n,i){if(!t.isUndef(e))for(var r in n){var o=n[r];if(o.regexp.test(e.value)){if(t.isUndef(i))return o;if(o.precedence===i)return o}}return!1},t.TimeBase.prototype._parseBinary=function(e,n){t.isUndef(n)&&(n=2);var i;i=n<0?this._parseUnary(e):this._parseBinary(e,n-1);for(var r=e.peek();r&&this._matchGroup(r,this._binaryExpressions,n);)r=e.next(),i=r.method.bind(this,i,this._parseBinary(e,n-1)),r=e.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,n;e=t.peek();var i=this._matchGroup(e,this._unaryExpressions);return i?(e=t.next(),n=this._parseUnary(t),i.method.bind(this,n)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(e){var n,i;if(n=e.peek(),t.isUndef(n))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(n,this._primaryExpressions)){n=e.next();var r=n.value.match(n.regexp);return n.method.bind(this,r[1],r[2],r[3])}if(n&&"("===n.value){if(e.next(),i=this._parseBinary(e),!(n=e.next())||")"!==n.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+n.value)},t.TimeBase.prototype._parseExprString=function(e){t.isString(e)||(e=e.toString());var n=this._tokenize(e);return this._parseBinary(n)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,n,i){return e instanceof t.TimeBase||(e=new this.constructor(e,i)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}.apply(e,i))&&(t.exports=r)},function(t,e,n){function i(t,e,n){s(t)||(n=e,e=t,t=document),e=r(e);var i=e.map(function(e){return o(t,e.selector,e.eventType,e.listener,n)});return function(){i.forEach(function(t){t.destroy()})}}function r(t){var e,n,i,r,o=[];for(var s in t)n=s.indexOf(" "),r=t[s],e=n<0?s:s.slice(0,n),i=n<0?"*":s.slice(n+1),o.push({selector:i,eventType:e,listener:r});return o}var o=n(67),s=n(69);t.exports=i},function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){"use strict";return t.SignalBase=function(){t.call(this)},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,n,i){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,n,i),this},t.SignalBase}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(8)],void 0!==(r=function(t){"use strict";return t.Param=function(){var e=t.defaults(arguments,["param","units","convert"],t.Param);t.call(this),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,t.isObject(e.lfo)?this.value=e.lfo:t.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(t.isObject(e)){if(t.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=n}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(this._fromUnits(t),this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(e){e=t.defaultArg(e,this.now());var n=this._param.value;return 0===n&&(n=this._minOutput),this._param.setValueAtTime(n,e),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,n){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(t,this.toSeconds(e),n),this},t.Param.prototype.setValueCurveAtTime=function(t,e,n){for(var i=0;i<t.length;i++)t[i]=this._fromUnits(t[i]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(n)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,n,i){return n=t.defaultArg(n,0),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampToValue(e,n,i):this.linearRampToValue(e,n,i),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(15),n(8)],void 0!==(r=function(t){"use strict";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var r=n(7),o=n(5);i(o);n(37);var s=n(6),a=i(s),u=n(23),l=i(u),c=n(102),h=i(c);AFRAME.registerComponent("material-sphere",{schema:{opacity:{type:"number",default:1},tintColor:{type:"string",default:"#ff0000"}},init:function(){var t=this.data;this.material=new THREE.ShaderMaterial({fog:!0,vertexShader:l.default,fragmentShader:h.default,uniforms:{enabled:{type:"1i",value:0},opacity:{type:"f",value:t.opacity},tintColor:{type:"c",value:new THREE.Color((0,r.stringToHex)(t.tintColor))},mixRate:{type:"f",value:0},fogNear:{type:"f",value:0},fogFar:{type:"f",value:0},fogColor:{type:"c",value:new THREE.Color}}});var e=this.el.getObject3D("mesh");e&&(e.renderOrder=1,e.material=this.material)},update:function(){var t=this.data;this.material.uniforms.opacity.value=t.opacity,this.material.uniforms.tintColor.value.setHex((0,r.stringToHex)(t.tintColor))}}),AFRAME.registerComponent("sphere",{schema:{name:{type:"string"},tintColor:{type:"string"}},init:function(){var t=this;this._activeColor="white",this._inactiveColor="rgb(30, 30, 30)";var e=document.createElementWithAttributes("a-entity",{scale:"0.15 0.15 0.15"});this.el.appendChild(e);var n=this.sphereEl=document.createElement("a-sphere");n.setAttribute("material-sphere","opacity: 0.8; tintColor: #0000ff"),n.setAttribute("position","0 0.5 0"),n.setAttribute("look-at","[camera]"),e.appendChild(n);var i=document.createElement("a-ring");i.setAttribute("color","white"),i.setAttribute("material","side: double; shader: flat;"),i.setAttribute("radius-inner","1"),i.setAttribute("radius-outer","1.1"),i.setAttribute("segments-theta",64),i.setAttribute("visible",!1),i.setAttribute("look-at","[camera]"),n.appendChild(i),this.el.addEventListener("mouseenter",function(){t.el.getAttribute("pointer-events")&&i.setAttribute("visible",!0)}),this.el.addEventListener("mouseleave",function(){t.el.getAttribute("pointer-events")&&i.setAttribute("visible",!1)}),n.classList.add("selectable"),this._addText(e),this._addEvents(n)},tick:function(){var t=this.el.components.player.getAmplitude();this.sphereEl.setAttribute("position","0 "+(t-.5)+" 0");var e=this.el.components["sound-rings"].amplitude;this.sphereEl.components["material-sphere"].material.uniforms.mixRate.value=2.5*e},_addText:function(t){var e=this.text=document.createElementWithAttributes("a-text",{value:"",position:"0 2 0",side:"double",align:"center","wrap-count":12,width:4,color:"white",rotation:"0 180 0",opacity:0,transparent:!0,animate:"attribute : opacity; time : 500;"});t.appendChild(e);var n=document.createElementWithAttributes("a-animation",{attribute:"opacity",begin:"floor-on",dur:"700",to:0}),i=document.createElementWithAttributes("a-animation",{attribute:"opacity",begin:"floor-off",dur:"700",to:1});e.appendChild(n),e.appendChild(i)},_addEvents:function(t){var e=this,n=0;t.addEventListener("click",function(){if(e.el.getAttribute("pointer-events")){if(!(Date.now()-n>500))return;if(n=Date.now(),"started"!==a.default.state)return;e.el.getAttribute("active")?e.el.setAttribute("active","false"):e.el.setAttribute("active","true"),e.el.sceneEl.emit("sphere-click",{index:e.el.getAttribute("track-index").index,active:e.el.getAttribute("active")})}}),this.el.addEventListener("componentchanged",function(e){"active"===e.detail.name&&(t.emit(e.detail.newData?"activate":"deactivate"),t.components["material-sphere"].material.uniforms.enabled.value=e.detail.newData?1:0)});var i=document.createElementWithAttributes("a-animation",{attribute:"material.color",begin:"activate",dur:"300",to:this._activeColor});t.appendChild(i);var r=document.createElementWithAttributes("a-animation",{attribute:"material.color",begin:"deactivate",dur:"300",to:this._inactiveColor});t.appendChild(r),window.hasOwnProperty("spheresList")?window.spheresList.push(t):window.spheresList=[t]},update:function(){this.text.setAttribute("value",this.data.name.toUpperCase()),this.sphereEl.setAttribute("material-sphere","opacity: 0.8; tintColor: "+this.data.tintColor)}})},,function(t,e,n){var i,r;i=[n(0),n(6),n(22),n(16),n(8),n(35),n(2)],void 0!==(r=function(t){"use strict";return t.Source=function(e){t.call(this),e=t.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,n,i){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this.retrigger||this._state.getValueAtTime(e)!==t.State.Started||this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var r=this._state.get(e);r.offset=t.defaultArg(n,0),r.duration=i;var o=t.Transport.schedule(function(t){this._start(t,n,i)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var n=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,n){if(n>0){var i=this._state.get(n);if(i&&i.state===t.State.Started&&i.time!==n){var r,o=n-this.toSeconds(i.time);i.duration&&(r=this.toSeconds(i.duration)-o),this._start(e,this.toSeconds(i.offset)+o,r)}}}.bind(this),this._syncedStop=function(e){this._state.getValueAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on("start loopStart",this._syncedStart),t.Transport.on("stop pause loopEnd",this._syncedStop),this},t.Source.prototype.unsync=function(){this._synced&&(t.Transport.off("stop pause loopEnd",this._syncedStop),t.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var e=0;e<this._scheduled.length;e++){var n=this._scheduled[e];t.Transport.clear(n)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){"use strict";return window.AnalyserNode&&!AnalyserNode.prototype.getFloatTimeDomainData&&(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var n=0;n<e.length;n++)t[n]=(e[n]-128)/128}),t.Analyser=function(){var e=t.defaults(arguments,["type","size"],t.Analyser);t.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser),t.Analyser.defaults={size:1024,type:"fft",smoothing:.8},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.prototype.analyse=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(2),n(108),n(113),n(3)],void 0!==(r=function(t){"use strict";return t.CrossFade=function(e){t.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(2),n(3)],void 0!==(r=function(t){"use strict";return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(17),n(2)],void 0!==(r=function(t){"use strict";return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(2),n(17),n(9)],void 0!==(r=function(t){"use strict";return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0)],void 0!==(r=function(t){"use strict";return t.Merge=function(){t.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(3)],void 0!==(r=function(t){"use strict";return t.Split=function(){t.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this._splitter.channelCount=2,this._splitter.channelCountMode="explicit",this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(3)],void 0!==(r=function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var r=n(5),o=(i(r),n(114)),s=(i(o),n(115)),a=n(4),u=n(6);i(u);n(48),AFRAME.registerComponent("loading",{schema:{loader:{default:!1,type:"boolean"},voiceOver:{default:!1,type:"boolean"}},init:function(){var t=this;a.supported&&(this.voice=new s.Voice,this.el.sceneEl.addEventListener("enter-360",function(){console.log("enter-360"),window.customStart()}),this.el.sceneEl.addEventListener("enter-vr",function(){window.customStart()}),this.first=!1,this.el.sceneEl.addEventListener("menu-selection",function(e){console.log("menu-selection"),t.voice.song(),t.first=!0}),this.el.sceneEl.addEventListener("audio-loaded",function(){console.log("audio-loaded"),t.voice.song(),t.el.setAttribute("loading","loader",!1)}),this.el.sceneEl.addEventListener("buffering",function(){t.el.setAttribute("loading","loader",!0)}),this.el.sceneEl.addEventListener("buffering-end",function(){t.el.setAttribute("loading","loader",!1)}),this.voice.on("ended",function(){t.el.setAttribute("loading","voiceOver",!1)}),this.el.sceneEl.addEventListener("song-end",function(){document.querySelector("#playButton").setAttribute("playbutton","playing:false; visible: false"),t.voice.pickAnother()}),this.el.sceneEl.addEventListener("end-vr",function(){t.voice.stop()}))},update:function(){var t=document.querySelector("#loadingRing"),e=document.querySelector("#playButton");document.querySelector("#menu");this.data.loader||this.data.voiceOver?(t.setAttribute("visible",!0),e.setAttribute("playbutton","playing:false; visible: false")):this.data.loader||this.data.voiceOver||!this.first||(t.setAttribute("visible",!1),e.setAttribute("playbutton","playing:true; visible: true"),this.el.sceneEl.emit("song-start"))}})},,function(t,e,n){"use strict";n(1);var i=n(32),r=function(t){return t&&t.__esModule?t:{default:t}}(i);AFRAME.registerComponent("mouse-cursor",{init:function(){var t=this;this.mousePosition=new THREE.Vector2,this.camera=document.querySelector("a-scene").camera,this.__vector=new THREE.Vector3,this.__removeListeners=(0,r.default)({mousemove:function(e){t.mousePosition.x=e.clientX,t.mousePosition.y=e.clientY},touchmove:function(e){if(e.touches){var n=e.touches[0];t.mousePosition.x=n.clientX,t.mousePosition.y=n.clientY}},touchstart:function(e){if(e.touches){var n=e.touches[0];t.mousePosition.x=n.clientX,t.mousePosition.y=n.clientY,t.el.emit("touch-start")}t.tick()},touchend:function(e){t.el.emit("touch-end")}}),this.onContextMenu=this.onContextMenu.bind(this),window.addEventListener("contextmenu",this.onContextMenu)},onContextMenu:function(t){return t.preventDefault(),t.stopPropagation(),!1},remove:function(){this.__removeListeners(),window.removeEventListener("contextmenu",this.onContextMenu)},tick:function(){this.__vector.set(this.mousePosition.x/window.innerWidth*2-1,-this.mousePosition.y/window.innerHeight*2+1,.5),this.__vector.unproject(this.camera);var t=this.camera.getWorldPosition(),e=this.__vector.sub(t).normalize(),n=t.clone().add(e.multiplyScalar(.1));this.el.setAttribute("position",n.x+" "+n.y+" "+n.z)}})},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){a.supported&&((0,l.default)(),(0,h.default)())}var o=n(18),s=i(o);n(52);var a=n(4),u=n(55),l=i(u),c=n(87),h=i(c);(0,s.default)(r)},function(t,e,n){var i=n(53);"string"==typeof i&&(i=[[t.i,i,""]]);n(11)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(10)(),e.push([t.i,"body,html{position:absolute;font-family:DIN Bold,sans-serif;top:0;left:0;width:100%;height:100%;margin:0;touch-callout:none!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body button#start,html button#start{position:absolute;top:20px;right:20px}a,a:active,a:visited{color:#fff}",""])},function(t,e,n){var i={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(t){var e,n,r;t=t||{},e=void 0!==t.parent?t.parent:document.body,n=void 0!==t.id?t.id:"oldie",r=i.getWebGLErrorMessage(),r.id=n,e.appendChild(r)}};t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){function t(){a.innerHTML="";var t=document.createElement("button");return t.classList.add("webvr-ui-button"),t.style.color="white",t.innerHTML='<div class="webvr-ui-title" style="padding: 0;">LOADING</div>',a.appendChild(t),t.addEventListener("click",e),s.style.display="none",(0,_.GA)("vr-display","none"),t}function e(){r.classList.remove("visible"),u.close(),i.play(),i.emit("enter-360"),(0,_.GA)("ui","enter","360")}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,i=n.querySelector("a-scene"),r=n.querySelector("#splash"),s=document.getElementById("try-it-in-360"),a=r.querySelector("#enter-vr-container"),u=new h.SplashScene(r.querySelector("canvas")),l=new Promise(function(t){return i.addEventListener("loaded",t)}),p=new m.EnterVRButton(null,{color:"#ffffff",corners:"square",onRequestStateChange:function(t){return!0},textEnterVRTitle:"loading".toUpperCase()});return p.domElement.addEventListener("click",function(){return p.setTitle("WAITING")},!0),(0,b.isTablet)()&&t(),p.on("ready",function(){var t=p.manager.defaultDisplay;t&&((0,_.GA)("vr-display",t.displayName),i.setAttribute("headset",t.displayName)),p.domElement.style.marginBottom="10px",(0,b.isTablet)()||a.insertBefore(p.domElement,a.firstChild),s.style.display="inline-block"}),p.on("enter",function(){r.classList.remove("visible"),u.close(),i.play(),i.enterVR(),(0,_.GA)("ui","enter","vr")}),p.on("exit",function(){i.exitVR(),i.pause(),r.classList.add("visible"),u.start()}),p.on("error",function(){p.state!==m.State.ERROR_NO_PRESENTABLE_DISPLAYS&&p.state!==m.State.ERROR_BROWSER_NOT_SUPPORTED||t()}),location.hash.substr(1)&&(0,f.default)(c.default.context,[a]),u.start(),window.splashScene=u,l.then(function(){p.sourceCanvas=i.renderer.domElement,i.pause(),s.addEventListener("click",e)}).then(T).then(function(){a.classList.add("ready");var t=function(){p.state!==m.State.READY_TO_PRESENT||(0,b.isMobile)()&&(0,b.isTablet)()?((0,b.isTablet)()||(p.state||"").indexOf("error")>=0)&&(document.querySelector(".webvr-ui-title").innerHTML='<img src="./images/360_icon.svg"><span>ENTER 360</span>',document.querySelector(".webvr-ui-title").classList.add("mode360")):p.setTitle("Enter VR".toUpperCase())};return p.getVRDisplay().then(t,t)}).catch(console.error.bind(console)),new v.ExitButton,new g.InsertHeadset,o(),r}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.querySelector("#about"),e=splash.querySelector("#openAbout"),n=splash.querySelector("#closeAbout");return e.addEventListener("click",function(){t.classList.add("visible"),(0,_.GA)("ui","open","about")}),n.addEventListener("click",function(){t.classList.remove("visible"),(0,_.GA)("ui","close","about")}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var s=n(12);i(s);n(56);n(4);n(1),n(28);var a=n(5),u=i(a),l=n(0),c=i(l),h=n(28),p=n(78),f=i(p),d=n(79),m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),v=n(80),g=n(84),y=n(16),_=(i(y),n(21)),b=n(7),T=new Promise(function(t){return u.default.on("load",t)})},function(t,e,n){var i=n(57);"string"==typeof i&&(i=[[t.i,i,""]]);n(11)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(10)(),e.push([t.i,'#splash{background-color:#000;color:#fff;opacity:0;transition:opacity .2s;display:none}#splash,#splash canvas{width:100%;height:100%;position:absolute;top:0;left:0}#splash canvas{opacity:.65}#splash.visible{display:inline;opacity:1}#splash #splash-container{width:90%;max-width:800px;min-width:300px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-family:DIN Condensed;text-transform:uppercase;text-align:center}#splash #splash-container #title{font-size:110px;margin-bottom:0}@media (max-width:800px){#splash #splash-container #title{font-size:75px}#splash #splash-container #title:before{top:25px!important}}@media (max-height:420px),(max-width:500px){#splash #splash-container #title{font-size:63px}#splash #splash-container #title:before{top:20px!important}}@media (max-height:420px){#splash #splash-container #title{margin-top:0}#splash #splash-container #title:before{top:-5px!important}}#splash #splash-container #title:before{content:"Youtube to 360 Music";position:absolute;width:100%;left:50%;top:40px;font-size:.3em;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#splash #splash-container #featuring{margin-top:0;margin-bottom:0;font-size:20px;display:none}@media (max-width:800px){#splash #splash-container #featuring{font-size:16px}}@media (max-width:500px){#splash #splash-container #featuring{font-size:10px}}@media (max-height:420px){#splash #splash-container #featuring{display:none}}#splash #splash-container #bands{margin-top:15px;width:100%;max-width:500px;min-width:300px;font-size:26px;display:inline-block;padding:0}@media (max-width:800px){#splash #splash-container #bands{font-size:20px}}@media (max-width:500px){#splash #splash-container #bands{margin-top:5px;font-size:16px}}@media (max-height:420px){#splash #splash-container #bands{display:none}}#splash #splash-container #bands span{display:inline-block}#splash #splash-container #bands span:after{margin-left:5px;margin-right:5px;display:inline;content:"/"}#splash #splash-container #bands span:last-child:after{content:""}#splash #splash-container #remember{text-transform:uppercase}#splash #splash-container #enter-vr-container{position:relative;display:block;margin-left:auto;margin-right:auto;margin-top:50px;min-width:170px;min-height:46px}@media (max-width:800px){#splash #splash-container #enter-vr-container{margin-top:30px}}@media (max-height:420px){#splash #splash-container #enter-vr-container{margin-top:10px}}#splash #splash-container #enter-vr-container .webvr-ui-button{border-radius:0;border:4px solid #fff}#splash #splash-container #enter-vr-container .webvr-ui-button:hover{background-color:hsla(0,0%,53%,.5)}#splash #splash-container #enter-vr-container .webvr-ui-button .mode360{left:18px}#splash #splash-container #enter-vr-container .webvr-ui-button .mode360 *{float:left}#splash #splash-container #enter-vr-container .webvr-ui-button .mode360 img{margin-right:5px;height:25px}#splash #splash-container #enter-vr-container .webvr-ui-button .mode360 span{height:25px;line-height:25px}@media (max-height:420px),(max-width:500px){#splash .aboutButton{top:20px!important;right:20px!important}#splash #headphones{top:20px!important;left:20px!important}}#splash #openAbout:before{content:"?"}#splash #closeAbout:before{font-size:30px;content:"\\D7"}#splash .aboutButton{position:absolute;z-index:1;top:30px;right:30px;width:40px;height:40px;text-align:center;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;cursor:pointer;line-height:40px}#splash .aboutButton:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}#splash .aboutButton:hover:active{color:#5dece8}#splash .aboutButton:before{font-family:sans-serif;font-size:20px}#splash #headphones{position:absolute;top:30px;left:30px;width:30px;height:30px;background-color:#fff;border-radius:15px;color:#000;overflow:hidden;transition:width .2s}#splash #headphones:hover{width:180px}#splash #headphones img{width:auto;display:inline-block;left:3px;height:28px;position:absolute}#splash #headphones #text{width:140px;display:inline-block;height:100%;position:absolute;line-height:30px;left:32px;font-size:11px}#splash #about{position:absolute;top:0;left:0;width:100%;height:100%;overflow-y:auto;overflow-x:hidden;font-weight:400;font-size:14px;line-height:20px;z-index:1;background-color:#000;display:none;font-family:Arial,Helvetica,sans-serif}#splash #about.visible{display:block}#splash #about #content{position:relative;width:70%;max-width:600px;min-width:300px;margin:50px auto 40px}#splash #about #content h2{line-height:1em;font-size:2.3em;text-transform:uppercase;font-family:DIN Condensed,sans-serif;margin-top:40px}#splash #about #content a{color:#5dece8}#splash #about #content .bandLink{display:block;margin-top:10px;margin-bottom:15px}#splash #about #content p{margin-top:20px;margin-bottom:20px}#splash #badges{position:absolute;bottom:20px;left:20px;height:50px;width:500px}@media (max-height:420px),(max-width:800px){#splash #badges{bottom:10px;left:10px;height:40px}}@media (max-height:420px){#splash #badges{height:35px}}@media (max-width:500px){#splash #badges{bottom:50px;width:300px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}}#splash #badges .badge{width:auto;height:100%;display:inline-block}#splash #badges .keyline{width:1px;background-color:#fff;height:100%;display:inline-block;margin-left:20px;margin-right:20px}@media (max-height:420px),(max-width:800px){#splash #badges .keyline{margin-left:10px;margin-right:10px}}#splash #badges a{width:auto;height:100%;color:#000;background:transparent}#splash #terms{position:absolute;bottom:20px;right:20px;color:#fff;font-size:11px;width:81px}@media (max-height:420px),(max-width:800px){#splash #terms{bottom:10px;right:10px}}@media (max-width:500px){#splash #terms{left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}}#splash #terms a{text-decoration:none}#splash #terms a:hover{text-decoration:underline}',""])},,,function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nprecision mediump float;\n\n#define TWO_PI 6.28318530718\n\nattribute float reference;\n\n// this is a raw shader material\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform float size;\nuniform float waveform[WAVEFORM_RESOLUTION];\nuniform float amplitude;\nuniform float radius;\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat fnoise(float p){\n\tfloat fl = floor(p);\n\tfloat fc = fract(p);\n\treturn mix(rand(fl), rand(fl + 1.0), fc);\n}\n\nvoid main() {\n\n\tfloat ref = reference * float(WAVEFORM_RESOLUTION);\n\n\tfloat angle = ((ref+1.)/float(WAVEFORM_RESOLUTION)) * 6.28318530718;\n\tvec3 pos = vec3( cos(angle), 0.0, sin(angle) );\n\tfloat offset = waveform[int(ref)] * amplitude;\n\n\tpos *= radius + offset * 0.5 + (amplitude * 0.165); //smoothstep(0.7, 1.0, amplitude)\n\n\t//pos = position;\n\n\n\tvec4 mvPosition = modelViewMatrix * vec4( pos.x, pos.y + offset, pos.z, 1.0 );\n\n\n\t// Apply Size Attenuation (make smaller when further)\n\tgl_PointSize = size * (1.0 / length( mvPosition.xyz ));\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n}\n"},function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nprecision mediump float;\n\nuniform vec3 color;\nuniform float opacity;\nuniform float amplitude;\nuniform sampler2D shape;\n\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\n\n\n//  Function from Iigo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsb2rgb( in vec3 c ){\n\tvec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n\t\t\t\t\t\t\t6.0)-3.0)-1.0,\n\t\t\t\t\t0.0,\n\t\t\t\t\t1.0 );\n\trgb = rgb*rgb*(3.0-2.0*rgb);\n\treturn c.z * mix(vec3(1.0), rgb, c.y);\n}\n\nvec3 rgb2hsb( in vec3 c ){\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, K.wz),\n\t\t\t\tvec4(c.gb, K.xy),\n\t\t\t\tstep(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r),\n\t\t\t\tvec4(c.r, p.yzx),\n\t\t\t\tstep(p.x, c.r));\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)),\n\t\t\t\td / (q.x + e),\n\t\t\t\tq.x);\n}\n\nvoid main() {\n\tvec4 texel = texture2D(shape, gl_PointCoord);\n\n\tif(texel.r == 0.0){\n\t\tdiscard;\n\t}\n\n\tvec3 c = rgb2hsb(color);\n\tc.g *= amplitude;\n\tc.b *= 0.5 + smoothstep(0.25, 1.0, amplitude);\n\n\tc = hsb2rgb(c);\n\n\t//fog\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogF = min(smoothstep(fogNear, fogFar, depth), 1.0);\n    //c = mix(c, fogColor, fogF);\n\tc *= texel.rgb;\n\n\t//gl_FragColor = vec4(color, opacity * pow(amplitude, 2.0));\n\tgl_FragColor = vec4( c, opacity * texel.a);\n\t//gl_FragColor = vec4(1.0);\n}\n"},function(t,e,n){var i,r;i=[n(0),n(31)],void 0!==(r=function(t){t.Frequency=function(e,n){if(!(this instanceof t.Frequency))return new t.Frequency(e,n);t.TimeBase.call(this,e,n)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var i=e[t.toLowerCase()],r=i+12*(parseInt(n)+1);return this.midiToFrequency(r)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}},t.Frequency.prototype.transpose=function(e){return this._expr=function(e,n){return e()*t.intervalToFrequencyRatio(n)}.bind(this,this._expr,e),this},t.Frequency.prototype.harmonize=function(e){return this._expr=function(e,n){for(var i=e(),r=[],o=0;o<n.length;o++)r[o]=i*t.intervalToFrequencyRatio(n[o]);return r}.bind(this,this._expr,e),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),i=Math.log(e/t.Frequency.A4)/Math.LN2,r=Math.round(12*i)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),n[r%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(30)],void 0!==(r=function(t){return t.TransportTime=function(e,n){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,n);t.Time.call(this,e,n)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var n=this._secondsToTicks(e()),i=Math.ceil(t.Transport.ticks/n);return this._ticksToUnits(i*n)}},t.TransportTime.prototype._secondsToTicks=function(e){var n=this._beatsToUnits(1),i=e/n;return Math.round(i*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}.apply(e,i))&&(t.exports=r)},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(e){for(var i=n(66),r="undefined"==typeof window?e:window,o=["moz","webkit"],s="AnimationFrame",a=r["request"+s],u=r["cancel"+s]||r["cancelRequest"+s],l=0;!a&&l<o.length;l++)a=r[o[l]+"Request"+s],u=r[o[l]+"Cancel"+s]||r[o[l]+"CancelRequest"+s];if(!a||!u){var c=0,h=0,p=[];a=function(t){if(0===p.length){var e=i(),n=Math.max(0,1e3/60-(e-c));c=n+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return p.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}t.exports=function(t){return a.call(r,t)},t.exports.cancel=function(){u.apply(r,arguments)},t.exports.polyfill=function(){r.requestAnimationFrame=a,r.cancelAnimationFrame=u}}).call(e,n(13))},function(t,e,n){(function(e){(function(){var n,i,r,o,s,a;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-s)/1e6},i=e.hrtime,n=function(){var t;return t=i(),1e9*t[0]+t[1]},o=n(),a=1e9*e.uptime(),s=o-a):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(e,n(27))},function(t,e,n){function i(t,e,n,i,o){var s=r.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}function r(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e),n.delegateTarget&&i.call(t,n)}}var o=n(68);t.exports=i},function(t,e){function n(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=n},function(t,e){function n(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}t.exports=n},function(t,e){function n(t){return 0===t||1===t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1}t.exports=n},function(t,e){THREE.EffectComposer=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1},i=t.getSize();e=new THREE.WebGLRenderTarget(i.width,i.height,n)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new THREE.ShaderPass(THREE.CopyShader)},Object.assign(THREE.EffectComposer.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t);var e=this.renderer.getSize();t.setSize(e.width,e.height)},insertPass:function(t,e){this.passes.splice(e,0,t)},render:function(t){var e,n,i=!1,r=this.passes.length;for(n=0;n<r;n++)if(e=this.passes[n],!1!==e.enabled){if(e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==THREE.MaskPass&&(e instanceof THREE.MaskPass?i=!0:e instanceof THREE.ClearMaskPass&&(i=!1))}},reset:function(t){if(void 0===t){var e=this.renderer.getSize();t=this.renderTarget1.clone(),t.setSize(e.width,e.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this.renderTarget1.setSize(t,e),this.renderTarget2.setSize(t,e);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(t,e)}}),THREE.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(THREE.Pass.prototype,{setSize:function(t,e){},render:function(t,e,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})},function(t,e){THREE.RenderPass=function(t,e,n,i,r){THREE.Pass.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},THREE.RenderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(t,e,n,i,r){var o=t.autoClear;t.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var s,a;this.clearColor&&(s=t.getClearColor().getHex(),a=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&t.setClearColor(s,a),this.scene.overrideMaterial=null,t.autoClear=o}})},function(t,e){THREE.ShaderPass=function(t,e){THREE.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof THREE.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=THREE.UniformsUtils.clone(t.uniforms),this.material=new THREE.ShaderMaterial({defines:t.defines||{},uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.ShaderPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.ShaderPass,render:function(t,e,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?t.render(this.scene,this.camera):t.render(this.scene,this.camera,e,this.clear)}})},function(t,e){THREE.UnrealBloomPass=function(t,e,n,i){THREE.Pass.call(this),this.strength=void 0!==e?e:1,this.radius=n,this.threshold=i,this.resolution=void 0!==t?new THREE.Vector2(t.x,t.y):new THREE.Vector2(256,256);var r={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new THREE.WebGLRenderTarget(o,s,r),this.renderTargetBright.texture.generateMipmaps=!1;for(var a=0;a<this.nMips;a++){var u=new THREE.WebGLRenderTarget(o,s,r);u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var u=new THREE.WebGLRenderTarget(o,s,r);u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),o=Math.round(o/2),s=Math.round(s/2)}void 0===THREE.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var l=THREE.LuminosityHighPassShader;this.highPassUniforms=THREE.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new THREE.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];for(var c=[3,5,7,9,11],o=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2),a=0;a<this.nMips;a++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[a])),this.separableBlurMaterials[a].uniforms.texSize.value=new THREE.Vector2(o,s),o=Math.round(o/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;var h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1),new THREE.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===THREE.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var p=THREE.CopyShader;this.copyUniforms=THREE.UniformsUtils.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new THREE.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new THREE.Color,this.oldClearAlpha=1,this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new THREE.Scene,this.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},THREE.UnrealBloomPass.prototype=Object.assign(Object.create(THREE.Pass.prototype),{constructor:THREE.UnrealBloomPass,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length();t++)this.renderTargetsHorizontal[t].dispose();for(var t=0;t<this.renderTargetsVertical.length();t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var n=Math.round(t/2),i=Math.round(e/2);this.renderTargetBright.setSize(n,i);for(var r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.texSize.value=new THREE.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2)},render:function(t,e,n,i,r){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(new THREE.Color(0,0,0),0),r&&t.context.disable(t.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,t.render(this.scene,this.camera,this.renderTargetBright,!0);for(var s=this.renderTargetBright,a=0;a<this.nMips;a++)this.quad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[a].uniforms.direction.value=THREE.UnrealBloomPass.BlurDirectionX,t.render(this.scene,this.camera,this.renderTargetsHorizontal[a],!0),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=THREE.UnrealBloomPass.BlurDirectionY,t.render(this.scene,this.camera,this.renderTargetsVertical[a],!0),s=this.renderTargetsVertical[a];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.context.enable(t.context.STENCIL_TEST),t.render(this.scene,this.camera,n,!1),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new THREE.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new THREE.Vector2(.5,.5)},direction:{value:new THREE.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new THREE.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),THREE.UnrealBloomPass.BlurDirectionX=new THREE.Vector2(1,0),THREE.UnrealBloomPass.BlurDirectionY=new THREE.Vector2(0,1)},function(t,e){THREE.ConvolutionShader={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new THREE.Vector2(.001953125,0)},cKernel:{value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vec2 imageCoord = vUv;","vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","imageCoord += uImageIncrement;","}","gl_FragColor = sum;","}"].join("\n"),buildKernel:function(t){var e,n,i,r,o=2*Math.ceil(3*t)+1;for(o>25&&(o=25),r=.5*(o-1),n=new Array(o),i=0,e=0;e<o;++e)n[e]=function(t,e){return Math.exp(-t*t/(2*e*e))}(e-r,t),i+=n[e];for(e=0;e<o;++e)n[e]/=i;return n}}},function(t,e){THREE.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new THREE.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")}},function(t,e){THREE.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},function(t,e,n){var i,r,o;/**
 *  StartAudioContext.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2016 Yotam Mann
 */
!function(n,s){r=[],i=s,void 0!==(o="function"==typeof i?i.apply(e,r):i)&&(t.exports=o)}(0,function(){function t(t){var e=t.createBuffer(1,1,t.sampleRate),n=t.createBufferSource();n.buffer=e,n.connect(t.destination),n.start(0),t.resume&&t.resume()}function e(t){return"running"===t.state}function n(t,n){function i(){e(t)?n():(requestAnimationFrame(i),t.resume&&t.resume())}e(t)?n():i()}function i(t,e,n){if(Array.isArray(t)||NodeList&&t instanceof NodeList)for(var r=0;r<t.length;r++)i(t[r],e,n);else if("string"==typeof t)i(document.querySelectorAll(t),e,n);else if(t.jquery&&"function"==typeof t.toArray)i(t.toArray(),e,n);else if(Element&&t instanceof Element){var s=new o(t,n);e.push(s)}}function r(t,e,r){var o=new Promise(function(e){n(t,e)}),s=[];return e||(e=document.body),i(e,s,t),o.then(function(){for(var t=0;t<s.length;t++)s[t].dispose();s=null,r&&r()}),o}var o=function(t,e){this._dragged=!1,this._element=t,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,e),t.addEventListener("touchstart",this._bindedEnd),t.addEventListener("touchmove",this._bindedMove),t.addEventListener("touchend",this._bindedEnd),t.addEventListener("mouseup",this._bindedEnd)};return o.prototype._moved=function(t){this._dragged=!0},o.prototype._ended=function(e){this._dragged||t(e),this._dragged=!1},o.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},r})},function(t,e,n){var i,i;!function(e){t.exports=e()}(function(){return function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var l="function"==typeof i&&i;if(!u&&l)return i(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return o(n||t)},h,h.exports,t,e,n,r)}return n[a].exports}for(var s="function"==typeof i&&i,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new i,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=a?a+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},o.prototype.emit=function(t,e,n,i,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,r),!0;case 6:return c.fn.call(c.context,e,n,i,r,o),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,i);break;default:if(!u)for(p=1,u=new Array(h-1);p<h;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(t,e,n){var i=new r(e,n||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.once=function(t,e,n){var i=new r(e,n||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new i:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[o]);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new i:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new i:delete this._events[e])):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,void 0!==e&&(e.exports=o)},{}],2:[function(t,e,n){/*!
* screenfull
* v3.2.2 - 2017-06-14
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==e&&e.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,o={};i<r;i++)if((e=n[i])&&e[1]in t){for(i=0;i<e.length;i++)o[n[0][i]]=e[i];return o}return!1}(),o={request:function(e){var n=r.requestFullscreen;e=e||t.documentElement,/5\.1[.\d]* Safari/.test(navigator.userAgent)?e[n]():e[n](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[r.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(e){t.addEventListener(r.fullscreenchange,e,!1)},onerror:function(e){t.addEventListener(r.fullscreenerror,e,!1)},raw:r};if(!r)return void(n?e.exports=!1:window.screenfull=!1);Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=o:window.screenfull=o}()},{}],3:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=t("./enter-vr-button"),o=i(r),s=t("./states"),a=i(s);"undefined"!=typeof AFRAME&&AFRAME&&AFRAME.registerComponent("webvr-ui",{dependencies:["canvas"],schema:{enabled:{type:"boolean",default:!0},color:{type:"string",default:"white"},background:{type:"string",default:"black"},corners:{type:"string",default:"square"},disabledOpacity:{type:"number",default:.5},textEnterVRTitle:{type:"string"},textExitVRTitle:{type:"string"},textVRNotFoundTitle:{type:"string"}},init:function(){},update:function(){var t=document.querySelector("a-scene");if(t.setAttribute("vr-mode-ui",{enabled:!this.data.enabled}),this.data.enabled){if(this.enterVREl)return;var e={color:this.data.color,background:this.data.background,corners:this.data.corners,disabledOpacity:this.data.disabledOpacity,textEnterVRTitle:this.data.textEnterVRTitle,textExitVRTitle:this.data.textExitVRTitle,textVRNotFoundTitle:this.data.textVRNotFoundTitle,onRequestStateChange:function(e){return e==a.default.PRESENTING?t.enterVR():t.exitVR(),!1}},n=this.enterVR=new o.default(t.canvas,e);this.enterVREl=n.domElement,document.body.appendChild(n.domElement),n.domElement.style.position="absolute",n.domElement.style.bottom="10px",n.domElement.style.left="50%",n.domElement.style.transform="translate(-50%, -50%)",n.domElement.style.textAlign="center"}else this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())},remove:function(){this.enterVREl&&(this.enterVREl.parentNode.removeChild(this.enterVREl),this.enterVR.remove())}})},{"./enter-vr-button":5,"./states":7}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={},r=function(t,e){var n=.8*e;return'<button class="'+t+'-button">\n          <div class="'+t+'-title"></div>\n          <div class="'+t+'-logo" >'+(s(t,n)+a(t,n))+"</div>\n        </button>"},o=n.injectCSS=function(t){var e=document.createElement("style");e.innerHTML=t;var n=document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild)},s=(n.createDefaultView=function(t){var e=t.height/3;t.injectCSS&&(i[t.cssprefix]||(o(u(t,e)),i[t.cssprefix]=!0));var n=document.createElement("div");return n.innerHTML=r(t.cssprefix,e),n.firstChild},n.createVRIcon=function(t,e){var n=document.createElement("div");return n.innerHTML=s(t,e),n.firstChild},n.createNoVRIcon=function(t,e){var n=document.createElement("div");return n.innerHTML=a(t,e),n.firstChild},function(t,e){return'<svg class="'+t+'-svg" version="1.1" x="0px" y="0px" \n        width="'+28/18*e+'px" height="'+e+'px" viewBox="0 0 28 18" xml:space="preserve">\n        <path d="M26.8,1.1C26.1,0.4,25.1,0,24.2,0H3.4c-1,0-1.7,0.4-2.4,1.1C0.3,1.7,0,2.7,0,3.6v10.7\n        c0,1,0.3,1.9,0.9,2.6C1.6,17.6,2.4,18,3.4,18h5c0.7,0,1.3-0.2,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l\n        1.5-2.6C13.2,13.1,13,13,14,13v0h-0.2 h0c0.3,0,0.7,0.1,0.8,0.5l1.4,2.6c0.3,0.6,0.8,1.1,1.3,\n        1.4c0.6,0.3,1.2,0.5,1.8,0.5h5c1,0,2-0.4,2.7-1.1c0.7-0.7,1.2-1.6,1.2-2.6 V3.6C28,2.7,27.5,\n        1.7,26.8,1.1z M7.4,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8c1.6,0,2.8,1.3,2.8,2.8\n        C10.2,10.5,8.9,11.8,7.4,11.8z M20.1,11.8c-1.6,0-2.8-1.3-2.8-2.8c0-1.6,1.3-2.8,2.8-2.8C21.7\n        ,6.2,23,7.4,23,9 C23,10.5,21.7,11.8,20.1,11.8z"/>\n    </svg>'}),a=function(t,e){return'<svg class="'+t+'-svg-error" x="0px" y="0px" \n        width="'+28/18*e+'px" height="'+28/18*e+'px" viewBox="0 0 28 28" xml:space="preserve">\n        <path d="M17.6,13.4c0-0.2-0.1-0.4-0.1-0.6c0-1.6,1.3-2.8,2.8-2.8s2.8,1.3,2.8,2.8s-1.3,2.8-2.8,2.8\n        c-0.2,0-0.4,0-0.6-0.1l5.9,5.9c0.5-0.2,0.9-0.4,1.3-0.8\n        c0.7-0.7,1.1-1.6,1.1-2.5V7.4c0-1-0.4-1.9-1.1-2.5c-0.7-0.7-1.6-1-2.5-1\n        H8.1 L17.6,13.4z"/>\n        <path d="M10.1,14.2c-0.5,0.9-1.4,1.4-2.4,1.4c-1.6,0-2.8-1.3-2.8-2.8c0-1.1,0.6-2,1.4-2.5\n        L0.9,5.1 C0.3,5.7,0,6.6,0,7.5v10.7c0,1,0.4,1.8,1.1,2.5c0.7,0.7,1.6,1,2.5,1\n        h5c0.7,0,1.3-0.1,1.8-0.5c0.6-0.3,1-0.8,1.3-1.4l1.3-2.6 L10.1,14.2z"/>\n        <path d="M25.5,27.5l-25-25C-0.1,2-0.1,1,0.5,0.4l0,0C1-0.1,2-0.1,2.6,0.4l25,25c0.6,0.6,0.6,1.5\n        ,0,2.1l0,0 C27,28.1,26,28.1,25.5,27.5z"/>\n    </svg>'},u=n.generateCSS=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=t.height,i=t.background?t.background:t.color,r=t.cssprefix,o=void 0;return o="round"==t.corners?t.height/2:"square"==t.corners?2:t.corners,"\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/31P4mP32i98D9CEnGyeX9Q.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+1E00-1EFF, U+20A0-20AB, U+20AD-20CF, U+2C60-2C7F, U+A720-A7FF;\n    }\n    @font-face {\n        font-family: 'Karla';\n        font-style: normal;\n        font-weight: 400;\n        src: local('Karla'), local('Karla-Regular'), \n             url(https://fonts.gstatic.com/s/karla/v5/Zi_e6rBgGqv33BWF8WTq8g.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, \n                       U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;\n    }\n\n    button."+r+"-button {\n        font-family: 'Karla', sans-serif;\n\n        border: "+i+" 2px solid;\n        border-radius: "+o+"px;\n        box-sizing: border-box;\n        background: "+(t.background?t.background:"none")+";\n\n        height: "+n+"px;\n        min-width: "+9.6*e+"px;\n        display: inline-block;\n        position: relative;\n\n        cursor: pointer;\n    }\n    \n    button."+r+"-button:focus {\n      outline: none;\n    }\n\n    /*\n    * Logo\n    */\n\n    ."+r+"-logo {\n        width: "+n+"px;\n        height: "+n+"px;\n        position: absolute;\n        top:0px;\n        left:0px;\n        width: "+(n-4)+"px;\n        height: "+(n-4)+"px;\n    }\n    ."+r+"-svg {\n        fill: "+t.color+";\n        margin-top: "+((n-.8*e)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n    ."+r+"-svg-error {\n        fill: "+t.color+";\n        display:none;\n        margin-top: "+((n-28/18*e*.8)/2-2)+"px;\n        margin-left: "+n/3+"px;\n    }\n\n\n    /*\n    * Title\n    */\n\n    ."+r+"-title {\n        color: "+t.color+";\n        position: relative;\n        font-size: "+e+"px;\n        padding-left: "+1.05*n+"px;\n        padding-right: "+(o-10<5?n/3:o-10)+"px;\n    }\n\n    /*\n    * disabled\n    */\n\n    button."+r+"-button[disabled=true] {\n        opacity: "+t.disabledOpacity+";\n        cursor: default;\n    }\n\n    button."+r+"-button[disabled=true] > ."+r+"-logo > ."+r+"-svg {\n        display:none;\n    }\n\n    button."+r+"-button[disabled=true] > ."+r+"-logo > ."+r+"-svg-error {\n        display:initial;\n    }\n  "}},{}],5:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./webvr-manager"),l=i(u),c=t("./dom"),h=t("./states"),p=i(h),f=t("eventemitter3"),d=i(f),m=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=n||{},n.color=n.color||"rgb(80,168,252)",n.background=n.background||!1,n.disabledOpacity=n.disabledOpacity||.5,n.height=n.height||55,n.corners=n.corners||"square",n.cssprefix=n.cssprefix||"webvr-ui",n.textEnterVRTitle=n.textEnterVRTitle||"ENTER VR",n.textVRNotFoundTitle=n.textVRNotFoundTitle||"VR NOT FOUND",n.textExitVRTitle=n.textExitVRTitle||"EXIT VR",n.onRequestStateChange=n.onRequestStateChange||function(){return!0},n.beforeEnter=n.beforeEnter||void 0,n.beforeExit=n.beforeExit||function(){return new Promise(function(t){return t()})},n.injectCSS=!1!==n.injectCSS,i.options=n,i.sourceCanvas=t,i.domElement=n.domElement||(0,c.createDefaultView)(n),i.__defaultDisplayStyle=i.domElement.style.display||"initial",i.manager=new l.default,i.manager.checkDisplays(),i.manager.addListener("change",function(t){return i.__onStateChange(t)}),i.domElement.addEventListener("click",function(){return i.__onEnterVRClick()}),i.__forceDisabled=!1,i.setTitle(i.options.textEnterVRTitle),i}return s(e,t),a(e,[{key:"setTitle",value:function(t){return this.domElement.title=t,v(this.domElement,this.options.cssprefix,"title",function(e){t?(e.innerText=t,e.style.display="initial"):e.style.display="none"}),this}},{key:"setTooltip",value:function(t){return this.domElement.title=t,this}},{key:"show",value:function(){return this.domElement.style.display=this.__defaultDisplayStyle,this.emit("show"),this}},{key:"hide",value:function(){return this.domElement.style.display="none",this.emit("hide"),this}},{key:"enable",value:function(){return this.__setDisabledAttribute(!1),this.__forceDisabled=!1,this}},{key:"disable",value:function(){return this.__setDisabledAttribute(!0),this.__forceDisabled=!0,this}},{key:"remove",value:function(){this.manager.remove(),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement)}},{key:"getVRDisplay",value:function(){return l.default.getVRDisplay()}},{key:"isPresenting",value:function(){return this.state===p.default.PRESENTING||this.state==p.default.PRESENTING_FULLSCREEN}},{key:"requestEnterVR",value:function(){var t=this;return new Promise(function(e,n){if(t.options.onRequestStateChange(p.default.PRESENTING))return t.options.beforeEnter?t.options.beforeEnter().then(function(){return t.manager.enterVR(t.manager.defaultDisplay,t.sourceCanvas)}).then(e):t.manager.enterVR(t.manager.defaultDisplay,t.sourceCanvas).then(e);n(new Error(p.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestExit",value:function(){var t=this,e=this.state;return new Promise(function(n,i){if(t.options.onRequestStateChange(p.default.READY_TO_PRESENT))return t.options.beforeExit().then(function(){return e===p.default.PRESENTING?t.manager.exitVR(t.manager.defaultDisplay):t.manager.exitFullscreen()}).then(n);i(new Error(p.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"requestEnterFullscreen",value:function(){var t=this;return new Promise(function(e,n){if(t.options.onRequestStateChange(p.default.PRESENTING_FULLSCREEN))return t.options.beforeEnter?t.options.beforeEnter().then(function(){return t.manager.enterFullscreen(t.sourceCanvas)}).then(e):t.manager.enterFullscreen(t.sourceCanvas).then(e);n(new Error(p.default.ERROR_REQUEST_STATE_CHANGE_REJECTED))})}},{key:"__setDisabledAttribute",value:function(t){t||this.__forceDisabled?this.domElement.setAttribute("disabled","true"):this.domElement.removeAttribute("disabled")}},{key:"__onEnterVRClick",value:function(){this.state==p.default.READY_TO_PRESENT?this.requestEnterVR():this.isPresenting()&&this.requestExit()}},{key:"__onStateChange",value:function(t){if(t!=this.state)switch(this.state!==p.default.PRESENTING&&this.state!==p.default.PRESENTING_FULLSCREEN||this.emit("exit",this.manager.defaultDisplay),this.state=t,t){case p.default.READY_TO_PRESENT:this.show(),this.setTitle(this.options.textEnterVRTitle),this.manager.defaultDisplay&&this.setTooltip("Enter VR using "+this.manager.defaultDisplay.displayName),this.__setDisabledAttribute(!1),this.emit("ready",this.manager.defaultDisplay);break;case p.default.PRESENTING:case p.default.PRESENTING_FULLSCREEN:this.manager.defaultDisplay&&this.manager.defaultDisplay.capabilities.hasExternalDisplay&&t!=p.default.PRESENTING_FULLSCREEN||this.hide(),this.setTitle(this.options.textExitVRTitle),this.__setDisabledAttribute(!1),this.emit("enter",this.manager.defaultDisplay);break;case p.default.ERROR_BROWSER_NOT_SUPPORTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Browser not supported"),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p.default.ERROR_NO_PRESENTABLE_DISPLAYS:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("No VR headset found."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p.default.ERROR_REQUEST_TO_PRESENT_REJECTED:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Something went wrong trying to start presenting to your headset."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t));break;case p.default.ERROR_EXIT_PRESENT_REJECTED:default:this.show(),this.setTitle(this.options.textVRNotFoundTitle),this.setTooltip("Unknown error."),this.__setDisabledAttribute(!0),this.emit("error",new Error(t))}}}]),e}(d.default);n.default=m;var v=function(t,e,n,i){var r=t.querySelector("."+e+"-"+n);r&&i(r)}},{"./dom":4,"./states":7,"./webvr-manager":8,eventemitter3:1}],6:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.WebVRManager=n.State=n.dom=n.EnterVRButton=void 0;var r=t("./webvr-manager"),o=i(r),s=t("./states"),a=i(s),u=t("./dom"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=t("./enter-vr-button"),h=i(c);t("./aframe-component"),n.EnterVRButton=h.default,n.dom=l,n.State=a.default,n.WebVRManager=o.default},{"./aframe-component":3,"./dom":4,"./enter-vr-button":5,"./states":7,"./webvr-manager":8}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={READY_TO_PRESENT:"ready",PRESENTING:"presenting",PRESENTING_FULLSCREEN:"presenting-fullscreen",PREPARING:"preparing",ERROR_NO_PRESENTABLE_DISPLAYS:"error-no-presentable-displays",ERROR_BROWSER_NOT_SUPPORTED:"error-browser-not-supported",ERROR_REQUEST_TO_PRESENT_REJECTED:"error-request-to-present-rejected",ERROR_EXIT_PRESENT_REJECTED:"error-exit-present-rejected",ERROR_REQUEST_STATE_CHANGE_REJECTED:"error-request-state-change-rejected",ERROR_UNKOWN:"error-unkown"}},{}],8:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./states"),l=i(u),c=t("eventemitter3"),h=i(c),p=t("screenfull"),f=i(p),d=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state=l.default.PREPARING,t.__onVRDisplayPresentChange=t.__onVRDisplayPresentChange.bind(t),window.addEventListener("vrdisplaypresentchange",t.__onVRDisplayPresentChange),t.__onChangeFullscreen=t.__onChangeFullscreen.bind(t),f.default.enabled&&document.addEventListener(f.default.raw.fullscreenchange,t.__onChangeFullscreen),t}return s(e,t),a(e,[{key:"checkDisplays",value:function(){var t=this;return e.getVRDisplay().then(function(e){return t.defaultDisplay=e,t.__setState(l.default.READY_TO_PRESENT),e}).catch(function(e){delete t.defaultDisplay,"NO_DISPLAYS"==e.name?t.__setState(l.default.ERROR_NO_PRESENTABLE_DISPLAYS):"WEBVR_UNSUPPORTED"==e.name?t.__setState(l.default.ERROR_BROWSER_NOT_SUPPORTED):t.__setState(l.default.ERROR_UNKOWN)})}},{key:"remove",value:function(){window.removeEventListener("vrdisplaypresentchange",this.__onVRDisplayPresentChange),f.default.enabled&&document.removeEventListener(f.default.raw.fullscreenchanged,this.__onChangeFullscreen),this.removeAllListeners()}},{key:"enterVR",value:function(t,e){var n=this;return this.presentedSource=e,t.requestPresent([{source:e}]).then(function(){},function(){return n.__setState(l.default.ERROR_REQUEST_TO_PRESENT_REJECTED)})}},{key:"exitVR",value:function(t){var e=this;return t.exitPresent().then(function(){e.presentedSource=void 0},function(){return e.__setState(l.default.ERROR_EXIT_PRESENT_REJECTED)})}},{key:"enterFullscreen",value:function(t){return f.default.enabled?f.default.request(t):this.__setState(l.default.PRESENTING_FULLSCREEN),!0}},{key:"exitFullscreen",value:function(){return f.default.enabled&&f.default.isFullscreen?f.default.exit():this.state==l.default.PRESENTING_FULLSCREEN&&this.checkDisplays(),!0}},{key:"__setState",value:function(t){t!=this.state&&(this.emit("change",t,this.state),this.state=t)}},{key:"__onChangeFullscreen",value:function(t){f.default.isFullscreen?this.state!=l.default.PRESENTING&&this.__setState(l.default.PRESENTING_FULLSCREEN):this.checkDisplays()}},{key:"__onVRDisplayPresentChange",value:function(t){try{var e=void 0;if(t.display?e=t.display:t.detail&&t.detail.display&&(e=t.detail.display),e&&e.isPresenting&&e.getLayers()[0].source!==this.presentedSource)return;var n=this.defaultDisplay&&this.defaultDisplay.isPresenting;this.__setState(n?l.default.PRESENTING:l.default.READY_TO_PRESENT)}catch(t){}}}],[{key:"getVRDisplay",value:function(){return new Promise(function(t,e){if(!navigator||!navigator.getVRDisplays){var n=new Error("Browser not supporting WebVR");return n.name="WEBVR_UNSUPPORTED",void e(n)}var i=function(){var t=new Error("No displays found");t.name="NO_DISPLAYS",e(t)};navigator.getVRDisplays().then(function(e){for(var n=0;n<e.length;n++)if(e[n].capabilities.canPresent){t(e[n]);break}i()},i)})}}]),e}(h.default);n.default=d},{"./states":7,eventemitter3:1,screenfull:2}]},{},[6])(6)})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ExitButton=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(81);var o=n(21),s=n(7);e.ExitButton=function(){function t(){var e=this;i(this,t),(this.element=document.querySelector("#exitButton")).addEventListener("click",function(){(0,o.GA)("ui","click","exit"),window.location.href="/"});var n=document.querySelector("a-scene");n.addEventListener("enter-360",function(){return e.show()}),n.addEventListener("enter-vr",function(){return e.show()}),n.addEventListener("exit-vr",function(){return e.hide()})}return r(t,[{key:"show",value:function(){var t=this;setTimeout(function(){(!(0,s.isMobile)()||(0,s.isMobile)()&&(0,s.is360)())&&t.element.classList.add("visible")},10)}},{key:"hide",value:function(){window.location.reload(),this.element.classList.remove("visible")}}]),t}()},function(t,e,n){var i=n(82);"string"==typeof i&&(i=[[t.i,i,""]]);n(11)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(10)(),e.push([t.i,"#exitButton{position:fixed;top:20px;left:20px;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:#fff;display:none;cursor:pointer;background-image:url("+n(83)+");background-size:100% 100%;z-index:10000000000}#exitButton.visible{display:block}",""])},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAASklEQVR4Ae2WUQEAERTAtFLtfb7IEoAGALAF2O4ABmoBCBp0rj6jc/UZmat3waJHjz6Dvpl+/f7A5MSySSZBggQJufPx2/p8B4AIFY44W50u+/YAAAAASUVORK5CYII="},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.InsertHeadset=void 0,n(85);e.InsertHeadset=function t(){var e=this;i(this,t);var n=this.element=document.querySelector("#insertHeadset");n.addEventListener("click",function(){e.emit("click"),e.hide()});var r=document.querySelector("a-scene");r.addEventListener("enter-vr",function(){r.isMobile&&n.classList.add("visible")})}},function(t,e,n){var i=n(86);"string"==typeof i&&(i=[[t.i,i,""]]);n(11)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(10)(),e.push([t.i,"#insertHeadset{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;display:none;z-index:10000000001}#insertHeadset img{width:auto;height:300px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#insertHeadset.visible{display:block}@media (orientation:landscape){#insertHeadset{display:none!important}}",""])},function(t,e,n){"use strict";function i(){var t=["a-entity[menu]","a-scene","a-entity[tracks]"].map(function(t){return document.querySelector(t)}),e=r(t,3),n=e[0],i=e[1],o=e[2];i.addEventListener("enter-360",function(){document.querySelector("a-scene").classList.add("is360")}),n.addEventListener("select",function(t){console.log("starting",t.detail.artist),o.setAttribute("tracks",{artist:t.detail.artist}),document.querySelectorAll("a-entity[track]").forEach(function(e){return e.setAttribute("waveform",t.detail.waveform)}),document.querySelector("a-sky").setAttribute("bg-color",t.detail.color),i.setAttribute("loading","loader",!0),i.setAttribute("loading","voiceOver",!0)})}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=i,n(88),n(90),n(95),n(97),n(99),n(101),n(125),n(126),n(47),n(130);var o=n(6);(function(t){t&&t.__esModule})(o),n(4)},function(t,e,n){"use strict";n(1);var i=n(4);n(89),AFRAME.registerComponent("menu",{schema:{shrink:{type:"boolean",default:!1}},open:function(){},init:function(){var t=this;if(i.supported){this.el.id="menu",this._itemWidth=200,this._itemHeight=200;var e=null,n=Date.now(),r=[];i.trackConfig.forEach(function(i,o){var s=document.createElement("a-entity");s.setAttribute("menu-item",{artist:i.artist,track:i.track,color:i.color,image:i.image}),t.el.appendChild(s);var a=1!==o&&4!==o;o<3?s.setAttribute("position",o-1+" 0 "+(a?.07:0)):s.setAttribute("position",o-4+" -0.76 "+(a?.07:0));0===o||3===o?s.setAttribute("rotation","0 8 0"):2!==o&&5!==o||s.setAttribute("rotation","0 -8 0"),s.addEventListener("click",function(){if(Date.now()-n>500&&(n=Date.now(),t.el.setAttribute("menu","shrink",!0),!s.getAttribute("menu-item").selected)){var r={};Object.assign(r,i),t.el.emit("select",r),t.el.sceneEl.emit("menu-selection",r),e&&e.setAttribute("menu-item","selected",!1),s.setAttribute("menu-item","selected",!0),e=s}}),r.push(s)}),this.el.sceneEl.addEventListener("song-end",function(){t.el.setAttribute("menu","shrink",!1)}),this.open=function(){var n=location.hash.substr(1),o=n.split(","),s=parseInt(o[1]);i.trackConfig[0]={artist:"PLAYING",track:"SONG",folder:o[0],intro:"song",segments:parseInt(s/30),duration:s,trackNames:["other","piano","drums","null","vocals","null","bass"],names:["other","piano","drums","null","vocals","null","bass"],soundRings:{startColor:"#f7002d",endColor:"#00edaa",shape:"triangle",size:8},floor:{color:"#253934"}},t.el.emit("select",i.trackConfig[0]),t.el.sceneEl.emit("menu-selection",i.trackConfig[0]),e&&e.setAttribute("menu-item","selected",!1),r[0].setAttribute("menu-item","selected",!0),e=r[0]},window.customStart=this.open}},update:function(){this.data.shrink?this.el.emit("shrink"):this.el.emit("grow")}})},function(t,e,n){"use strict";n(1),AFRAME.registerComponent("menu-item",{schema:{artist:{type:"string"},track:{type:"string"},color:{type:"color"},image:{default:"pink",type:"string"},selected:{default:!1,type:"boolean"}},init:function(){var t=this;this.darkGray="rgb(30, 30, 30)",this.selectedColor="rgb(60, 60, 60)",this.lightGray="rgb(80, 80, 80)";this.el.setAttribute("material","side: double; transparent:true; opacity: 0.5");var e=this._width=800,n=this._height=600;this.el.setAttribute("scale","0.95 "+.95*n/e+" 0.95");var i=document.createElement("a-text");i.setAttribute("value",this.data.artist.toUpperCase()),i.setAttribute("align","center"),i.setAttribute("material","shader: flat"),i.setAttribute("color","white"),i.setAttribute("wrap-count",20),i.setAttribute("width",1),i.setAttribute("side","double"),i.setAttribute("scale","1 "+e/n+" 1"),i.setAttribute("position","0 0.08 0"),this.el.appendChild(i);var r=document.createElement("a-text");r.setAttribute("value",this.data.track.toUpperCase()),r.setAttribute("align","center"),r.setAttribute("material","shader: flat"),r.setAttribute("color","white"),r.setAttribute("wrap-count",26),r.setAttribute("width",1),r.setAttribute("side","double"),r.setAttribute("scale","1 "+e/n+" 1"),r.setAttribute("position","0 -0.1 0"),this.el.appendChild(r);var o=this.bgElement=document.createElement("a-plane");this.el.appendChild(o),o.setAttribute("material","shader: flat; color: "+this.darkGray+"; side: double; transparent: true; opacity: 0.5"),o.classList.add("selectable"),this.el.addEventListener("mouseenter",function(){o.setAttribute("material","color",t.lightGray)}),this.el.addEventListener("mouseleave",function(){t.data.selected?o.setAttribute("material","color",t.selectedColor):o.setAttribute("material","color",t.darkGray)}),this.el.sceneEl.addEventListener("song-end",function(){t.el.setAttribute("menu-item","selected",!1)})},_makeBorder:function(t){var e=this._context,n=this._width,i=this._height,r=t?20:10;e.lineWidth=r,e.clearRect(0,0,n,n);var o=r/2;e.strokeRect(6+o,6+o,n-12-2*o,i-12-2*o)},update:function(){this.bgElement.setAttribute("material","color",this.data.selected?this.selectedColor:this.darkGray)}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var r=n(6),o=i(r),s=n(5),a=(i(s),n(16)),u=(i(a),n(21));AFRAME.registerComponent("playbutton",{schema:{playing:{default:!1,type:"boolean"},visible:{type:"boolean",default:!1}},init:function(){var t=this,e=0;this.el.addEventListener("click",function(){if(Date.now()-e>500){e=Date.now();var n="started"===o.default.state;t.el.setAttribute("playbutton","playing",!n),(0,u.GA)("playbutton","click",n?"pause":"play")}}),this.el.sceneEl.addEventListener("menu-selection",function(t){o.default.stop()})},update:function(){this.timeout&&clearTimeout(this.timeout),this.data.playing?(o.default.start("+0.25"),this.el.querySelector("a-plane").setAttribute("src","#pause_button")):(o.default.pause(),this.el.querySelector("a-plane").setAttribute("src","#play_button")),this.data.visible?this.el.setAttribute("scale","0.15 0.015 0.15"):this.el.setAttribute("scale","0 0 0")}})},function(t,e,n){var i,r;i=[n(0),n(92),n(35),n(14),n(19)],void 0!==(r=function(t){"use strict";return t.Clock=function(){var e=t.defaults(arguments,["callback","frequency"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TickSignal(e.frequency,t.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._state.get(e).offset=n),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){var e=this.now()+this.context.updateInterval,n=this._state.get(e);if(n){if(n.state!==this._lastState)switch(this._lastState=n.state,n.state){case t.State.Started:t.isUndef(n.offset)||(this.ticks=n.offset),this._nextTick=n.time,this.emit("start",n.time,this.ticks);break;case t.State.Stopped:this.ticks=0,this.emit("stop",n.time);break;case t.State.Paused:this.emit("pause",n.time)}for(;e>this._nextTick&&this._state;){var i=this._nextTick;if(this.frequency&&(this._nextTick+=this.frequency.getDurationOfTicks(1,this._nextTick),n.state===t.State.Started))try{this.callback(i),this.ticks++}catch(t){throw this.ticks++,t}}}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(93)],void 0!==(r=function(t){function e(t){return function(e,n){n=this.toSeconds(n),t.apply(this,arguments);var i=this._events.get(n),r=this._events.previousEvent(i),o=this._getTickUntilEvent(r,n-this.sampleTime);return i.ticks=Math.max(o,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.TimelineSignal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0},t.extend(t.TickSignal,t.TimelineSignal),t.TickSignal.prototype.setValueAtTime=e(t.TimelineSignal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.TimelineSignal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var i=this._events.get(e),r=0;r<=5;r++){var o=n*r+e,s=this._exponentialApproach(i.time,i.value,t,n,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);var n=this._events.get(e);null===n&&(n={value:this._initial,time:0});for(var i=(e-n.time)/5,r=0;r<=5;r++){var o=i*r+n.time,s=this._exponentialInterpolate(n.time,n.value,e,t,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},t.TickSignal.prototype._getTickUntilEvent=function(t,e){null===t&&(t={ticks:0,time:0});var n=this.getValueAtTime(t.time),i=this.getValueAtTime(e);return.5*(e-t.time)*(n+i)+t.ticks},t.TickSignal.prototype.getTickAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return this._getTickUntilEvent(e,t)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var n=this.getTickAtTime(e);return this.getTimeOfTick(n+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type===t.TimelineSignal.Type.Linear&&n.value!==i.value){var r=this.getValueAtTime(n.time),o=this.getValueAtTime(i.time),s=(o-r)/(i.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*s*(n.ticks-e)),u=(-r+a)/s,l=(-r-a)/s;return(u>0?u:l)+n.time}return n?0===n.value?1/0:n.time+(e-n.ticks)/n.value:e/this._initial},t.TickSignal}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(2),n(15)],void 0!==(r=function(t){"use strict";return t.TimelineSignal=function(){var e=t.defaults(arguments,["value","units"],t.Signal);t.Signal.call(this,e),this._events=new t.Timeline(10),this._initial=this._fromUnits(this._param.value),this.value=e.value,delete this.input},t.extend(t.TimelineSignal,t.Signal),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){if(this._events){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}}),t.TimelineSignal.prototype.setValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:n}),this._param.setValueAtTime(e,n),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:n}),this._param.linearRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){n=this.toSeconds(n);var i=this._searchBefore(n);i&&0===i.value&&this.setValueAtTime(this._minOutput,i.time),e=this._fromUnits(e);var r=Math.max(e,this._minOutput);return this._events.add({type:t.TimelineSignal.Type.Exponential,value:r,time:n}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,n,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=Math.max(this._minOutput,i),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:n,constant:i}),this._param.setTargetAtTime(e,n,i),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,n,i,r){r=t.defaultArg(r,1);for(var o=new Array(e.length),s=0;s<o.length;s++)o[s]=this._fromUnits(e[s])*r;n=this.toSeconds(n),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Curve,value:o,time:n,duration:i}),this._param.setValueAtTime(o[0],n);for(var a=1;a<o.length;a++){var u=n+a/(o.length-1)*i;this._param.linearRampToValueAtTime(o[a],u)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var n=this._toUnits(this.getValueAtTime(e)),i=this._searchBefore(e);if(i&&i.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(i&&i.type===t.TimelineSignal.Type.Curve&&i.time+i.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(n,e);else{var r=this._searchAfter(e);r&&(this.cancelScheduledValues(e),r.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(n,e):r.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(n,e)),this.setValueAtTime(n,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.linearRampToValueAtTime(t,n),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,n),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var n=this._searchAfter(e),i=this._searchBefore(e),r=this._initial;if(null===i)r=this._initial;else if(i.type===t.TimelineSignal.Type.Target){var o,s=this._events.getBefore(i.time);o=null===s?this._initial:s.value,r=this._exponentialApproach(i.time,o,i.value,i.constant,e)}else r=i.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(i.time,i.value,i.duration,e):null===n?i.value:n.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(i.time,i.value,n.time,n.value,e):n.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(i.time,i.value,n.time,n.value,e):i.value;return r},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,n,i,r){return(e=Math.max(this._minOutput,e))*Math.pow(i/e,(r-t)/(n-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,n,i){var r=e.length;if(i>=t+n)return e[r-1];if(i<=t)return e[0];var o=(i-t)/n,s=Math.floor((r-1)*o),a=Math.ceil((r-1)*o),u=e[s],l=e[a];return a===s?u:this._linearInterpolate(s,u,a,l,o*(r-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(8)],void 0!==(r=function(t){"use strict";t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(n){if(t.isUndef(n.time)||t.isUndef(n.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var i=new e(n.time,n.time+n.duration,n);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0;n<e.length;n++){var i=e[n];if(i.event===t){this._removeNode(i),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n,i=t.getBalance();if(i>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(n)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),i=t.right;t.right=i.left,i.left=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),i=t.left;t.left=i.right,i.right=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],i=1;i<e.length;i++)e[i].low>n.low&&(n=e[i]);return n.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var n=0;n<e.length;n++){var i=e[n].event;i&&t(i)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n);for(var i=n.length-1;i>=0;i--){var r=n[i].event;r&&e(r)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n);for(var i=n.length-1;i>=0;i--){e(n[i].event)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,n){this.event=n,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(23),o=i(r),s=n(96),a=i(s),u=n(7);AFRAME.registerComponent("shader-floor",{schema:{color:{default:"#333333",type:"string"}},init:function(){var t=new THREE.Color((0,u.stringToHex)(this.data.color)),e=new THREE.Mesh(new THREE.PlaneBufferGeometry(10,10),new THREE.ShaderMaterial({fog:!0,vertexShader:o.default,fragmentShader:a.default,uniforms:{u_startColor:{type:"c",value:new THREE.Color(16711680)},u_endColor:{type:"c",value:new THREE.Color(65280)},u_diffuseColor:{type:"c",value:t},u_num:{type:"f",value:0},u_active:{type:"iv",value:[0,0,0,0,0,0,0,0,0,0]},u_time:{type:"f",value:1},u_amplitudes:{type:"fv",value:[0,0,0,0,0,0]},u_fade:{type:"f",value:.4},u_normalMap:{type:"t",value:(new THREE.TextureLoader).load("images/textures/saad/NormalMap_4.jpg")},u_specularMap:{type:"t",value:(new THREE.TextureLoader).load("images/textures/floor-specular-1.jpg")},fogNear:{type:"f",value:0},fogFar:{type:"f",value:0},fogColor:{type:"c",value:new THREE.Color}}}));e.rotateX(-Math.PI/2),this.mesh=e,this.el.object3D.add(e),this.soundRings=[],this.onTrackComponentChanged=this.onTrackComponentChanged.bind(this)},update:function(){this.mesh.material.uniforms.u_diffuseColor.value.set((0,u.stringToHex)(this.data.color))},onTrackComponentChanged:function(t){var e=this;Array.from(document.querySelectorAll("a-entity[track-index]")).forEach(function(t,n){0==n&&(e.mesh.material.uniforms.u_startColor.value=t.components["sound-rings"].startColor,e.mesh.material.uniforms.u_endColor.value=t.components["sound-rings"].endColor),e.mesh.material.uniforms.u_active.value[n]=t.getAttribute("active")?1:0})},tick:function(t,e){var n=this;if(!this.soundRings.length)return this.soundRings=Array.from(document.querySelectorAll("a-entity[sound-rings]")),this.mesh.material.uniforms.u_num.value=this.soundRings.length,void Array.from(document.querySelectorAll("a-entity[track-index]")).forEach(function(t){t.addEventListener("componentchanged",n.onTrackComponentChanged)});this.mesh.material.uniforms.u_amplitudes.value=this.soundRings.map(function(t){return Number(t.getAttribute("amplitude"))}),this.mesh.material.uniforms.u_time.value=t/1e3}})},function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n#define NUM_OCTAVES 5\n\n#define BLUE_HSB vec3(190.0/360.0, 90.0/100.0, 96.0/100.0)\n#define BLUE_RGB vec3(24.0/255.0, 210.0/255.0, 246.0/255.0)\n#define PINK_HSB vec3(312.0/360.0, 1.0, 1.0)\n#define PINK_RGB vec3(1.0, 0.0, 205.0/255.0)\n\nuniform vec3 u_startColor;\nuniform vec3 u_endColor;\nuniform vec3 u_diffuseColor;\nuniform float u_num;\nuniform float u_time;\nuniform float u_amplitudes[10];\nuniform int u_active[10];\nuniform float u_fade;\nuniform sampler2D u_normalMap;\nuniform sampler2D u_specularMap;\n\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\n\nvarying vec2 vUv;\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat fnoise(float p){\n\tfloat fl = floor(p);\n\tfloat fc = fract(p);\n\treturn mix(rand(fl), rand(fl + 1.0), fc);\n}\n\n\nfloat fbm(float x) {\n\tfloat v = 0.0;\n\tfloat a = 0.5;\n\tfloat shift = float(100);\n\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\tv += a * fnoise(x);\n\t\tx = x * 2.0 + shift;\n\t\ta *= 0.5;\n\t}\n\treturn v;\n}\n\nfloat circle( vec2 pos, float r ){\n\tvec2 center = vec2(0.0);\n\tfloat l = length(pos - center);\n\n\tl = step(r, l);\n\tl = 1.0 - l;\n\n\treturn l;\n}\n\n\nfloat smoothcircle( vec2 pos, float r ){\n\tvec2 center = vec2(0.0);\n\tfloat l = length(pos - center);\n\n\tl = smoothstep(0.0, r, l);\n\tl = 1.0 - l;\n\n\treturn l;\n}\n\n\nvoid main(){\n\n\tint N = int(u_num);\n\tfloat radius = 0.4;\n\n\tfloat radialGap = TWO_PI / 8.0;\n\tfloat rotationOffset = -TWO_PI / 8.0;\n\n\tvec2 uv = vUv;\n\n\tvec2 pos = uv * 2.0 - 1.0;\n\tvec4 texel = texture2D(u_normalMap, uv);\n\tpos += (texel.gb * 2. - 1.) * 0.05;\n\n\t//this offset is to matc the spheres positioning above it\n\tpos.y -= 0.05;\n\n\tfloat dist = length(pos);\n\tfloat angle = atan(pos.y, pos.x);\n\n\tfloat blue = 0.0;\n\tfloat orb = 0.0;\n\n\tfloat amplitude = 0.0;\n\n\tfor(int index=0; index<10; index++){\n\t\tif(index >= N){\n\t\t\tbreak;\n\t\t}\n\t\tif(u_active[index] == 0){\n\t\t\tcontinue;\n\t\t}\n\t\tfloat angle = (TWO_PI - radialGap) / 7.0 * float(index);\n\t\tangle += rotationOffset;\n\n\t\tvec2 off = vec2(cos(angle), sin(angle));\n\t\toff *= radius;\n\n\t\tblue += smoothcircle(pos + off, 0.3 * u_amplitudes[index]);\n\t\t//blue *= 1.0 - smoothstep(0.1, 0.3, blue);\n\t\t//the orb should get slightly smaller with more amplitude cause its raising\n\t\tamplitude = u_amplitudes[index];\n\t\torb += smoothstep(0.1, 0.8, smoothcircle(pos + off, 0.1 - (amplitude * 0.06)));\n\t\tif(orb > 0.0){\n\t\t\t//we've already found the one for this frag\n\t\t\tbreak;\n\t\t}\n\t}\n\n\n\tvec3 color = vec3(mix(u_endColor, u_startColor, blue)) * blue;\n\t// mix the orb with the start color\n\t//color += mix(u_startColor, vec3(1.0), amplitude) * orb * 0.66;\n\t//or keep it white\n\tcolor += orb * 0.66;\n\tcolor *= u_fade;\n\tfloat fadeFromCenter = (1.0 - smoothstep(0.0, 0.4, length(pos)));\n\tcolor += u_diffuseColor * fadeFromCenter;\n\n\tcolor *= texel.r;\n\t//color += texture2D(u_specularMap, uv).rgb * 0.05;\n\n\t//fog\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogF = min(smoothstep(fogNear, fogFar, depth), 1.0);\n    color = mix(color, fogColor, fogF);\n\n\t//color += vec3(0.02);\n\t//color = mix(color, vec3(0.5, 0.5, 0.5), 1.0 - orb);\n\n\tgl_FragColor = vec4(color,1.0);\n\t//gl_FragColor = vec4(mix(mix(PINK_RGB, BLUE_RGB, blue), vec3(1.0), orb) * blue, 1.0);\n}\n"},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(7),o=n(29),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),a=n(20),u=i(a),l=n(98),c=i(l),h=function(t,e,n,i,o,a){var u=function(t,e){return(0,r.map)(t,0,e-1,.18,.6666)};n*=(0,r.isMobile)()?.1:window.devicePixelRatio||1,n=(0,r.isDaydream)()?.1:n;var l=function(t,l){return new s.RingPoints({radius:u(t,l),resolution:e,color:o.clone().lerp(a,t/l),opacity:Math.min(1,(0,r.map)(l-(t+1),l,1,4,.3)),size:(0,r.lerp)(n,10*n,t/(l-1)),blending:THREE.AdditiveBlending,shape:i})};return(0,r.take)(t,l)};window.AFRAME.registerComponent("sound-rings",{schema:{startColor:{default:"#ff0000",type:"string"},endColor:{default:"#0000ff",type:"string"},shape:{default:"circle",type:"string"},size:{default:5,type:"number"}},init:function(){var t=this;s.geometryPool.clear();var e=(0,r.stringToHex)(this.data.startColor),n=(0,r.stringToHex)(this.data.endColor);this.startColor=new THREE.Color(e),this.endColor=new THREE.Color(n),this.numRings=(0,r.isMobile)()?25:40,this.pointsPerRing=(0,r.isMobile)()?64:128,this.rings=h(this.numRings,this.pointsPerRing,4.5,"circle",this.startColor,this.endColor),this.rings.forEach(function(t){return t.position.set(0,-.25,0)}),this.__cacheProperties(),this.rings.forEach(function(e){return t.el.object3D.add(e)}),this.waveformData=(0,r.take)(this.numRings,function(e){return new Float32Array(t.pointsPerRing)}),this.amplitude=0,this.onTrackComponentChanged=this.onTrackComponentChanged.bind(this),this.el.addEventListener("componentchanged",this.onTrackComponentChanged),this.loop=(0,u.default)(),this.__transition()},__cacheProperties:function(){this.__originalOpacities=this.rings.map(function(t){return t.material.uniforms.opacity.value}),this.__originalRadii=this.rings.map(function(t){return t.material.uniforms.radius.value})},__transition:function(){var t=this,e=!!this.el.getAttribute("active"),n=c.default;this.loop.reset().removeAllListeners().on("update",function(i,o){t.rings.forEach(function(i,s,a){var u=e?5*s:10*s,l=e?50:500,c=(0,r.clamp)(n(o/(l+u)),0,1),h=t.__originalOpacities[s],p=t.__originalRadii[s];i.material.uniforms.radius.value=(0,r.map)(c,0,1,e?0:p,e?p:0),i.material.uniforms.opacity.value=(0,r.map)(c,0,1,e?0:h,e?h:0),s===a.length-1&&c>=1&&t.loop.stop()})}).start()},onTrackComponentChanged:function(t){"active"===t.detail.name&&this.__transition()},update:function(){var t=this;this.startColor.setHex((0,r.stringToHex)(this.data.startColor)),this.endColor.setHex((0,r.stringToHex)(this.data.endColor));var e=(new THREE.TextureLoader).load("images/textures/"+this.data.shape+".png");this.rings.forEach(function(n,i,r){n.material.uniforms.size.value=t.data.size*(window.devicePixelRatio||1),n.material.uniforms.color.value=t.startColor.clone().lerp(t.endColor,i/r.length),n.material.uniforms.shape.value=e})},tick:function(){var t=this,e=this.el.components.player,n=e.getAmplitude();this.amplitude=Math.max(n,this.amplitude+.1*(n-this.amplitude)),this.el.setAttribute("amplitude",this.amplitude);var i=this.waveformData.pop();this.el.components.player.getWaveform(i),this.waveformData.unshift(i),this.rings.forEach(function(e,n){e.material.uniforms.waveform.value=t.waveformData[n],e.material.uniforms.amplitude.value=t.amplitude})}})},function(t,e){function n(t){return 0===t?t:Math.pow(2,10*(t-1))}t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(23),u=i(a),l=n(100),c=i(l),h=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{fog:!0,vertexShader:u.default,fragmentShader:c.default,uniforms:{u_time:{type:"f",value:0},fogNear:{type:"f",value:0},fogFar:{type:"f",value:0},fogColor:{type:"c",value:new THREE.Color}},transparent:!0}));return t.side=THREE.BackSide,t}return s(e,t),e}(THREE.ShaderMaterial);AFRAME.registerComponent("atmosphere",{init:function(){this.mesh=new THREE.Mesh(new THREE.SphereGeometry(1,36,36),new h),this.el.object3D.add(this.mesh)},tick:function(t){this.mesh.material.uniforms.u_time.value=t/1e3}})},function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n#define PI 3.14159265359\n#define TWO_PI 6.28318530718\n#define NUM_OCTAVES 5\n#define TILES 75.0\n\nvarying vec2 vUv;\n\nuniform float u_time;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\n\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nfloat fnoise(float p){\n\tfloat fl = floor(p);\n\tfloat fc = fract(p);\n    return mix(rand(fl), rand(fl + 1.0), fc);\n}\n\n\nfloat fbm(float x) {\n    float v = 0.0;\n    float a = 0.5;\n    float shift = float(100);\n    for (int i = 0; i < NUM_OCTAVES; ++i) {\n        v += a * fnoise(x);\n        x = x * 2.0 + shift;\n        a *= 0.5;\n    }\n    return v;\n}\n\nvoid main(){\n\n    float noi = mod(vUv.x * TILES, 1.0);\n\tfloat noy = mod(vUv.y * TILES, 1.0) - (smoothstep(1.0, 0.17, vUv.y) + smoothstep(0.65, 1.0, vUv.y));\n\n    noi = step(0.15, noi);\n\n    float v = noi * noy * 0.12;\n\n\tvec3 color = vec3(v);\n\n\t//fog\n    //float depth = gl_FragCoord.z / gl_FragCoord.w;\n    //float fogF = min(smoothstep(fogNear, fogFar, depth), 1.0);\n    //color = mix(color, fogColor, fogF);\n\tgl_FragColor = vec4(color,  noi * noy);\n}\n"},function(t,e,n){"use strict";n(1),n(36),n(103),n(104),n(121);var i=n(4);AFRAME.registerComponent("tracks",{schema:{artist:{type:"string"}},init:function(){var t=this;this.el.id="tracks";var e=i.trackConfig.reduce(function(t,e){return Math.max(t,e.names.length)},0);this.tracks=[];for(var n=0;n<e;n++){var r=document.createElement("a-entity");this.tracks.push(r),r.setAttribute("sphere","tintColor:#000000"),r.setAttribute("track-state",""),r.setAttribute("pointer-events",!1),r.setAttribute("active","false"),r.setAttribute("player",""),r.setAttribute("track-index","index : "+n+"; length: "+e),r.setAttribute("on-floor",!0),r.setAttribute("sound-rings",""),this.el.appendChild(r)}this.el.sceneEl.addEventListener("song-end",function(){return t.el.setAttribute("tracks","artist","")})},update:function(){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){if(""!==t.data.artist){var e=(0,i.getTrackData)(t.data.artist),n=document.querySelector("a-entity[shader-floor]");n&&n.setAttribute("shader-floor","color: "+e.floor.color);for(var r=0;r<e.names.length;r++){var o=t.tracks[r];o.emit("refresh"),o.setAttribute("track-index","index : "+r+"; length: "+e.names.length),o.setAttribute("player","folder:"+e.folder+";name:"+e.trackNames[r]+"; segments: "+e.segments),o.setAttribute("sphere","name: "+e.names[r]+"; tintColor:"+e.soundRings.startColor),o.setAttribute("sound-rings","\n\t\t\t\t\tsize:"+e.soundRings.size+";\n\t\t\t\t\tstartColor:"+e.soundRings.startColor+";\n\t\t\t\t\tendColor:"+e.soundRings.endColor+";\n\t\t\t\t")}}},500)}}),AFRAME.registerComponent("track-index",{schema:{index:{type:"int",default:-1},length:{type:"int",default:1}},init:function(){},update:function(){var t=Math.PI/4,e=(2*Math.PI-t)/this.data.length,n=e*(this.data.index+.5)+t/2;this.el.setAttribute("scale","1 1 1"),this.el.setAttribute("rotation","0 "+180*n/Math.PI+" 0")}})},function(t,e){t.exports="/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n#define OFF_COLOR vec3(0.5, 237.0/255.0/2.0, 198.0/255.0/2.0)\nuniform float opacity;\nuniform vec3 tintColor;\nuniform float mixRate;\nuniform int enabled;\n\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\n\nvarying vec2 vUv;\n\nvoid main(){\n\tfloat shadeX = abs(vUv.x * 2. - 1.);\n\tfloat shadeY = abs(vUv.y * 2. - 1.);\n\tvec4 color = vec4(1.0);\n\tif(enabled == 1){\n\t\t//gl_FragColor = vec4(tintColor * shadeX * shadeY + 0.66 * mixRate, opacity);\n\n\t\tcolor = vec4(mix(tintColor, vec3(1.0) * (smoothstep(0.4, 1.0, mixRate) + 0.9), smoothstep(0.0, 0.7 * mixRate, smoothstep(0.0, 0.95, vUv.y))) * (shadeX * shadeY + 0.66), 1.0);\n\t\t//color = vec4(mix(vec3(1.0), tintColor * (smoothstep(0.4, 1.0, mixRate) + 0.9), smoothstep(0.0, 0.9 * mixRate, vUv.y)) * (shadeX * shadeY + 0.66), 1.0);\n\t} else {\n\t\tcolor = vec4(OFF_COLOR * shadeX * shadeY, opacity);\n\t}\n\n\n\t//fog\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogF = min(smoothstep(fogNear, fogFar, depth), 1.0);\n    color.rgb = mix(color.rgb * 1.1, fogColor, fogF);\n\n\tgl_FragColor = color;\n}\n"},function(t,e,n){"use strict";n(1);var i=n(6);!function(t){t&&t.__esModule}(i);n(36);var r=n(4);AFRAME.registerComponent("pointer-events",{schema:{type:"boolean",default:!1},init:function(){var t=this;this.el.addEventListener("refresh",function(){t.el.setAttribute("pointer-events",!1)}),this.el.sceneEl.addEventListener("audio-loaded",function(){t.el.getAttribute("disabled")||t.el.setAttribute("pointer-events",!0)})}}),AFRAME.registerComponent("active",{schema:{type:"boolean",default:!1},init:function(){var t=this;this.el.addEventListener("refresh",function(){t.el.setAttribute("active",!1)}),this.el.sceneEl.addEventListener("song-end",function(){t.el.setAttribute("active",!1)}),this.el.sceneEl.addEventListener("audio-loaded",function(){t.el.getAttribute("disabled")||t.el.setAttribute("active",!0)})}}),AFRAME.registerComponent("on-floor",{schema:{type:"boolean",default:!0},init:function(){var t=this;this.el.sceneEl.addEventListener("audio-loaded",function(){t.el.getAttribute("disabled")||t.el.setAttribute("on-floor",!1)}),this.el.sceneEl.addEventListener("song-end",function(){t.el.setAttribute("on-floor",!0)}),this.el.sceneEl.addEventListener("menu-selection",function(){t.el.setAttribute("on-floor",!0)}),this.el.setAttribute("position","y",.3)},update:function(){var t=this.el.getAttribute("track-index"),e=Math.PI/4,n=(2*Math.PI-e)/t.length,i=n*(t.index+.5)+e/2,o=r.trackRadius*Math.sin(i),s=r.trackRadius*Math.cos(i),a=this.data?"floor-on":"floor-off";this.el.querySelector("a-text").emit&&this.el.querySelector("a-text").emit(a);var u=this.el,l=this.data?.3:1.1;this.tween&&this.tween.stop(),this.tween=new TWEEN.Tween({y:this.el.object3D.position.y}).to({y:l},1800).onUpdate(function(){u.setAttribute("position",o+" "+this.y+" "+s)}).easing(TWEEN.Easing.Quintic.Out).delay(200*Math.random()).start(),this.el.setAttribute("pointer-events",!this.data)}}),AFRAME.registerComponent("disabled",{schema:{type:"boolean",default:!1},init:function(){var t=this;this.el.addEventListener("refresh",function(){t.el.setAttribute("disabled",!1)})},update:function(){this.data&&(this.el.setAttribute("on-floor",!0),this.el.setAttribute("active",!1),this.el.setAttribute("pointer-events",!1))}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(105),o=n(106),s=(i(o),n(3)),a=i(s),u=n(39),l=(i(u),n(107)),c=i(l),h=n(6);i(h);n(47),n(119),n(1),AFRAME.registerComponent("player",{schema:{name:{type:"string"},folder:{type:"string"},segments:{type:"int"}},init:function(){var t=this;this.system.players.push(this),this._panner=new c.default({rolloffFactor:1.25,panningModel:"equalpower"}).toMaster(),this._rms=0,this._amplitudeArray=new Float32Array(64),this._boost=(new a.default).connect(this._panner),this._level=(new a.default).connect(this._boost),this.el.addEventListener("componentchanged",function(e){if("active"===e.detail.name){var n=e.detail.newData?1:0;t._level.gain.cancelScheduledValues(),t._level.gain.rampTo(n,.1,"+0.01")}}),this.el.addEventListener("refresh",function(){t._level.gain.cancelScheduledValues(),t._level.gain.value=1}),this.el.addEventListener("mouseenter",function(){t._boost.gain.cancelScheduledValues(),t._boost.gain.rampTo(1.5,.1,"+0.01")}),this.el.addEventListener("mouseleave",function(){t._boost.gain.cancelScheduledValues(),t._boost.gain.rampTo(1,.4,"+0.01")}),this.el.sceneEl.addEventListener("song-end",function(){t.el.setAttribute("player","name","")}),this.el.sceneEl.addEventListener("song-start",function(){t._level.gain.cancelScheduledValues(),t._level.gain.value=1,console.log("starting",t._level.gain.value)})},update:function(){var t=this;this.el.object3D.updateMatrixWorld();var e=this.el.object3D.matrixWorld,n=(new THREE.Vector3).setFromMatrixPosition(e);this._panner.setPosition(n.x,n.y,n.z),this._player&&(this._player.dispose(),this._player=null),"null"===this.data.name?this.el.setAttribute("disabled",!0):""!==this.data.name&&(this.el.setAttribute("disabled",!1),this._player=new r.StreamingPlayer(this.data.folder,this.data.name,this.data.segments),this._player.output.connect(this._level),this.el.classList.add("loading"),this._player.on("loaded",function(){return t.system.loading()}),this._player.on("buffering",function(){return t.system.buffering()}),this._player.on("bufferingEnd",function(){return t.system.bufferingEnd()}))},getWaveform:function(t){this._player&&this._player.getWaveform(t)},getAmplitude:function(){if(this._player){if(this.el.getAttribute("active")){this.getWaveform(this._amplitudeArray);for(var t=this._amplitudeArray,e=0,n=0;n<t.length;n++)e+=t[n]*t[n];e=Math.sqrt(e/64),e>.001&&(e+=.4);var i=.7*this._rms+(1-.7)*e;this._rms=Math.max(i,.98*this._rms)}else this._rms=.95*this._rms;return this._rms}return 0},isLoaded:function(){return this.el.getAttribute("disabled")||this._player&&this._player.loaded},isBuffering:function(){return this._player&&this._player.buffering}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.StreamingPlayer=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(24),l=i(u),c=n(6),h=i(c),p=n(5),f=i(p),d=n(0),m=(i(d),n(3)),v=i(m),g=n(12),y=i(g),_=30;e.StreamingPlayer=function(t){function e(t,n,i){r(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s.segment=0,s.folder=t,s.track=n,s.totalSegments=i,s.output=new v.default,s.playingSource=null,s.id=h.default.scheduleRepeat(function(t){s.playSegment(s.segment,t,0),s.segment++,s.loadNext()},30,0),s.started=!1,s._startMethod=function(t,e){if(s.started){var n=Math.floor(e/_);s.playSegment(n,t,e-n*_)}s.started=!0},s._pauseMethod=function(t){s.playingSource&&s.playingSource.stop(t,.1)},s._stopMethod=function(t){s.buffers=[]},h.default.on("start",s._startMethod),h.default.on("pause stop",s._pauseMethod),h.default.on("stop",s._stopMethod),s.buffers=[],s.buffering=!1,s.loaded=!1;var a=s.trackName();return s.loadFirstTrack(a),s}return s(e,t),a(e,[{key:"loadFirstTrack",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this,n=new f.default(t,function(){e.buffers[0]=n,e.loaded=!0,e.emit("loaded")},function(){setTimeout(function(){loadFirstTrack(t)},200*Math.random()+200)})})},{key:"loadNextTrack",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this,i=new f.default(t,function(){n.buffering&&(n.buffering=!1,n.emit("bufferingEnd")),n.buffers[e-2]&&(n.buffers[e-2]=null),n.buffers[e]=i},function(){setTimeout(function(){loadNextTrack(t,e)},200*Math.random()+200)})})},{key:"loadNext",value:function(){var t=this;if(!this.buffers[this.segment]){var e=this.segment;e<=this.totalSegments&&setTimeout(function(){var n=t.trackName();t.loadNextTrack(n,e)},5e3*Math.random()+1e3)}}},{key:"playSegment",value:function(t,e,n){if(this.buffers[t]){var i=new l.default(this.buffers[t]);i.connect(this.output),i.start(e,n),this.playingSource=i}else this.emit("buffering"),this.buffering=!0}},{key:"trackName",value:function(){return"http://demos.hcilab.ml/audio/"+this.folder+"/"+this.track+"-"+this.segment+".[mp3|ogg]"}},{key:"getWaveform",value:function(t){if(0===h.default.seconds)for(var e=0;e<t.length;e++)t[e]=0;else{var n=Math.floor(h.default.seconds/_),i=h.default.seconds-n*_,r=Math.floor(i*h.default.context.sampleRate),o=this.buffers[n];o&&r<o.length&&o.get().copyFromChannel(t,0,r)}}},{key:"dispose",value:function(){var t=this;h.default.off("start",this._startMethod),h.default.off("pause stop",this._pauseMethod),h.default.off("stop",this._stopMethod),h.default.clear(this.id),this.removeAllListeners("buffering"),this.removeAllListeners("bufferingEnd"),this.removeAllListeners("loaded"),setTimeout(function(){t.output.dispose()},500)}}]),e}(y.default.EventEmitter)},function(t,e,n){var i,r;i=[n(0),n(39)],void 0!==(r=function(t){"use strict";return t.Meter=function(){var e=t.defaults(arguments,["type","smoothing"],t.Meter);t.call(this),this.type=e.type,this.input=this.output=this._analyser=new t.Analyser("waveform",512),this.smoothing=e.smoothing,this._lastValue=0},t.extend(t.Meter),t.Meter.Type={Level:"level",Signal:"signal"},t.Meter.defaults={smoothing:.8,type:t.Meter.Type.Level},Object.defineProperty(t.Meter.prototype,"value",{get:function(){var e=this._analyser.analyse();if(this.type===t.Meter.Type.Level){for(var n=0,i=0;i<e.length;i++)n+=Math.pow(e[i],2);var r=Math.sqrt(n/e.length);r=Math.max(r,this._lastValue*this.smoothing),this._lastValue=r;var o=r/.35;return Math.sqrt(o)}return e[0]}}),t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(40),n(44),n(45),n(2),n(26),n(46)],void 0!==(r=function(t){"use strict";return t.Panner3D=function(){var e=t.defaults(arguments,["positionX","positionY","positionZ"],t.Panner3D);t.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,n){if(this._panner.positionX){var i=this.now();this._panner.positionX.setTargetAtTime(t,i,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,i,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this._panner.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,n){if(this._panner.orientationX){var i=this.now();this._panner.orientationX.setTargetAtTime(t,i,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,i,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this._panner.setOrientation(t,e,n);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(41),n(25),n(17),n(110),n(43),n(109),n(42),n(111),n(112),n(26)],void 0!==(r=function(t){"use strict";function e(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),n._eval(e[1]).connect(i,0,1),i}function n(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),i}function i(t){return t?parseFloat(t):void 0}function r(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){t.SignalBase.call(this);var e=this._replacements(Array.prototype.slice.call(arguments)),n=this._parseInputs(e);this._nodes=[],this.input=new Array(n);for(var i=0;i<n;i++)this.input[i]=this.context.createGain();var r,o=this._parseTree(e);try{r=this._eval(o)}catch(t){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+e)}this.output=r},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){return new t.Signal(i(e))}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[i(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,n){var i=r(e[1]),o=new t.Modulo(i);return n._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,n){var i=r(e[1]),o=new t.Pow(i);return n._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,n){var i=new t.AudioToGain;return n._eval(e[0]).connect(i),i}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(i,r){return 1===i.length?n(t.Negate,i,r):e(t.Subtract,i,r)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,t.Negate)},"!":{regexp:/^\!/,method:n.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),n=0;if(null!==e)for(var i=0;i<e.length;i++){var r=parseInt(e[i].substr(1))+1;n=Math.max(n,r)}return n},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),n=0;n<t.length;n++)e=e.replace(/\%/i,t[n]);return e},t.Expr.prototype._tokenize=function(e){for(var n=-1,i=[];e.length>0;){e=e.trim();var r=function(e){for(var n in t.Expr._Expressions){var i=t.Expr._Expressions[n];for(var r in i){var o=i[r],s=o.regexp,a=e.match(s);if(null!==a)return{type:n,value:a[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}(e);i.push(r),e=e.substr(r.value.length)}return{next:function(){return i[++n]},peek:function(){return i[n+1]}}},t.Expr.prototype._parseTree=function(e){function n(t,e){return!c(t)&&"glue"===t.type&&t.value===e}function i(e,n,i){var r=t.Expr._Expressions[n];if(!c(e))for(var o in r){var s=r[o];if(s.regexp.test(e.value)){if(c(i))return!0;if(s.precedence===i)return!0}}return!1}function r(t){c(t)&&(t=5);var e;e=t<0?o():r(t-1);for(var n=l.peek();i(n,"binary",t);)n=l.next(),e={operator:n.value,method:n.method,args:[e,r(t-1)]},n=l.peek();return e}function o(){var t,e;return t=l.peek(),i(t,"unary")?(t=l.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):s()}function s(){var t,e;if(t=l.peek(),c(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=l.next(),a(t);if("value"===t.type)return t=l.next(),{method:t.method,args:t.value};if(n(t,"(")){if(l.next(),e=r(),t=l.next(),!n(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}function a(t){var e,i=[];if(e=l.next(),!n(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');if(e=l.peek(),n(e,")")||(i=u()),e=l.next(),!n(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:i,name:name}}function u(){for(var t,e,i=[];;){if(e=r(),c(e))break;if(i.push(e),t=l.peek(),!n(t,","))break;l.next()}return i}var l=this._tokenize(e),c=t.isUndef.bind(this);return r()},t.Expr.prototype._eval=function(e){if(!t.isUndef(e)){var n=e.method(e.args,this);return this._nodes.push(n),n}},t.Expr.prototype._disposeNodes=function(){for(var e=0;e<this._nodes.length;e++){var n=this._nodes[e];t.isFunction(n.dispose)?n.dispose():t.isFunction(n.disconnect)&&n.disconnect(),n=null,this._nodes[e]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.SignalBase.prototype.dispose.call(this),this._disposeNodes()},t.Expr}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(9),n(33)],void 0!==(r=function(t){"use strict";return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(43),n(25),n(2)],void 0!==(r=function(t){"use strict";return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(9),n(17),n(25)],void 0!==(r=function(t){"use strict";return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(9)],void 0!==(r=function(t){"use strict";return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(9)],void 0!==(r=function(t){"use strict";return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i;!function(r){function o(t,e){if(t=t||"",e=e||{},t instanceof o)return t;if(!(this instanceof o))return new o(t,e);var n=s(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=G(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=G(this._r)),this._g<1&&(this._g=G(this._g)),this._b<1&&(this._b=G(this._b)),this._ok=n.ok,this._tc_id=q++}function s(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,o=null,s=!1,u=!1;return"string"==typeof t&&(t=D(t)),"object"==typeof t&&(U(t.r)&&U(t.g)&&U(t.b)?(e=a(t.r,t.g,t.b),s=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):U(t.h)&&U(t.s)&&U(t.v)?(i=B(t.s),r=B(t.v),e=h(t.h,i,r),s=!0,u="hsv"):U(t.h)&&U(t.s)&&U(t.l)&&(i=B(t.s),o=B(t.l),e=l(t.h,i,o),s=!0,u="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=C(n),{ok:s,format:t.format||u,r:z(255,W(e.r,0)),g:z(255,W(e.g,0)),b:z(255,W(e.b,0)),a:n}}function a(t,e,n){return{r:255*k(t,255),g:255*k(e,255),b:255*k(n,255)}}function u(t,e,n){t=k(t,255),e=k(e,255),n=k(n,255);var i,r,o=W(t,e,n),s=z(t,e,n),a=(o+s)/2;if(o==s)i=r=0;else{var u=o-s;switch(r=a>.5?u/(2-o-s):u/(o+s),o){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:a}}function l(t,e,n){function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var r,o,s;if(t=k(t,360),e=k(e,100),n=k(n,100),0===e)r=o=s=n;else{var a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;r=i(u,a,t+1/3),o=i(u,a,t),s=i(u,a,t-1/3)}return{r:255*r,g:255*o,b:255*s}}function c(t,e,n){t=k(t,255),e=k(e,255),n=k(n,255);var i,r,o=W(t,e,n),s=z(t,e,n),a=o,u=o-s;if(r=0===o?0:u/o,o==s)i=0;else{switch(o){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:a}}function h(t,e,n){t=6*k(t,360),e=k(e,100),n=k(n,100);var i=r.floor(t),o=t-i,s=n*(1-e),a=n*(1-o*e),u=n*(1-(1-o)*e),l=i%6;return{r:255*[n,a,s,s,u,n][l],g:255*[u,n,n,a,s,s][l],b:255*[s,s,u,n,n,a][l]}}function p(t,e,n,i){var r=[F(G(t).toString(16)),F(G(e).toString(16)),F(G(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(t,e,n,i,r){var o=[F(G(t).toString(16)),F(G(e).toString(16)),F(G(n).toString(16)),F(N(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function d(t,e,n,i){return[F(N(i)),F(G(t).toString(16)),F(G(e).toString(16)),F(G(n).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.s-=e/100,n.s=P(n.s),o(n)}function v(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.s+=e/100,n.s=P(n.s),o(n)}function g(t){return o(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.l+=e/100,n.l=P(n.l),o(n)}function _(t,e){e=0===e?0:e||10;var n=o(t).toRgb();return n.r=W(0,z(255,n.r-G(-e/100*255))),n.g=W(0,z(255,n.g-G(-e/100*255))),n.b=W(0,z(255,n.b-G(-e/100*255))),o(n)}function b(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.l-=e/100,n.l=P(n.l),o(n)}function T(t,e){var n=o(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,o(n)}function E(t){var e=o(t).toHsl();return e.h=(e.h+180)%360,o(e)}function x(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+120)%360,s:e.s,l:e.l}),o({h:(n+240)%360,s:e.s,l:e.l})]}function w(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+90)%360,s:e.s,l:e.l}),o({h:(n+180)%360,s:e.s,l:e.l}),o({h:(n+270)%360,s:e.s,l:e.l})]}function S(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+72)%360,s:e.s,l:e.l}),o({h:(n+216)%360,s:e.s,l:e.l})]}function A(t,e,n){e=e||6,n=n||30;var i=o(t).toHsl(),r=360/n,s=[o(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(o(i));return s}function R(t,e){e=e||6;for(var n=o(t).toHsv(),i=n.h,r=n.s,s=n.v,a=[],u=1/e;e--;)a.push(o({h:i,s:r,v:s})),s=(s+u)%1;return a}function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function k(t,e){M(t)&&(t="100%");var n=L(t);return t=z(e,W(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function P(t){return z(1,W(0,t))}function O(t){return parseInt(t,16)}function M(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function L(t){return"string"==typeof t&&-1!=t.indexOf("%")}function F(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function N(t){return r.round(255*parseFloat(t)).toString(16)}function I(t){return O(t)/255}function U(t){return!!Z.CSS_UNIT.exec(t)}function D(t){t=t.replace(j,"").replace(V,"").toLowerCase();var e=!1;if(X[t])t=X[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Z.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(t))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),a:I(n[4]),format:e?"name":"hex8"}:(n=Z.hex6.exec(t))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),format:e?"name":"hex"}:(n=Z.hex4.exec(t))?{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),a:I(n[4]+""+n[4]),format:e?"name":"hex8"}:!!(n=Z.hex3.exec(t))&&{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),format:e?"name":"hex"}}function H(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}var j=/^\s+/,V=/\s+$/,q=0,G=r.round,z=r.min,W=r.max,Y=r.random;o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i,o,s,a=this.toRgb();return t=a.r/255,e=a.g/255,n=a.b/255,i=t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4),s=n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4),.2126*i+.7152*o+.0722*s},setAlpha:function(t){return this._a=C(t),this._roundA=G(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),i=G(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=G(360*t.h),n=G(100*t.s),i=G(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return p(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return f(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:G(this._r),g:G(this._g),b:G(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+G(this._r)+", "+G(this._g)+", "+G(this._b)+")":"rgba("+G(this._r)+", "+G(this._g)+", "+G(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:G(100*k(this._r,255))+"%",g:G(100*k(this._g,255))+"%",b:G(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+G(100*k(this._r,255))+"%, "+G(100*k(this._g,255))+"%, "+G(100*k(this._b,255))+"%)":"rgba("+G(100*k(this._r,255))+"%, "+G(100*k(this._g,255))+"%, "+G(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Q[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=o(t);n="#"+d(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},o.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:B(t[i]));t=n}return o(t,e)},o.equals=function(t,e){return!(!t||!e)&&o(t).toRgbString()==o(e).toRgbString()},o.random=function(){return o.fromRatio({r:Y(),g:Y(),b:Y()})},o.mix=function(t,e,n){n=0===n?0:n||50;var i=o(t).toRgb(),r=o(e).toRgb(),s=n/100;return o({r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a})},o.readability=function(t,e){var n=o(t),i=o(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},o.isReadable=function(t,e,n){var i,r,s=o.readability(t,e);switch(r=!1,i=H(n),i.level+i.size){case"AAsmall":case"AAAlarge":r=s>=4.5;break;case"AAlarge":r=s>=3;break;case"AAAsmall":r=s>=7}return r},o.mostReadable=function(t,e,n){var i,r,s,a,u=null,l=0;n=n||{},r=n.includeFallbackColors,s=n.level,a=n.size;for(var c=0;c<e.length;c++)(i=o.readability(t,e[c]))>l&&(l=i,u=o(e[c]));return o.isReadable(t,u,{level:s,size:a})||!r?u:(n.includeFallbackColors=!1,o.mostReadable(t,["#fff","#000"],n))};var X=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=o.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(X),Z=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=o:void 0!==(i=function(){return o}.call(e,n,e,t))&&(t.exports=i)}(Math)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Voice=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(12),l=i(u),c=n(116),h=i(c),p=n(5),f=(i(p),n(24)),d=(i(f),n(118)),m=(i(d),n(0)),v=i(m),g=n(4);e.Voice=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._playedLoading=!1,t._hadErrorLoading=!1;var n="http://demos.hcilab.ml/audio";return t._players=(new h.default).toMaster(),t._players.fadeOut=.5,t._players.volume.value=-10,g.trackConfig.forEach(function(t){t.intro}),t.loadTrack("experience",n+"/intro.mp3"),t.loadTrack("loading",n+"/loading.mp3"),t._id=-1,t}return s(e,t),a(e,[{key:"loadTrack",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){this._players.add(t,e,function(n){n.loaded||(console.log(n),setTimeout(function(){loadTrack(t,e)},200*Math.random()+200))})})},{key:"pickAnother",value:function(){}},{key:"intro",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stop(),this._players.get("experience").start()}},{key:"song",value:function(){var t=this;if(this.stop(),g.useVoiceOver){if(!this._playedLoading){if(this._hadErrorLoading){var e=1.7,n=this._players.get("loading");n.loaded?(this._players.get("loading").start("+"+e),e+=this._players.get("loading").buffer.duration,this._hadErrorLoading=!1,this._playedLoading=!0):this._hadErrorLoading=!0}this._hadErrorLoading||(this._id=v.default.context.setTimeout(function(){t.emit("ended")},duration))}}else setTimeout(function(){t.emit("ended")},200)}},{key:"stop",value:function(){v.default.context.clearTimeout(this._id),this._players.stopAll("+0.5")}}]),e}(l.default.EventEmitter)},function(t,e,n){var i,r;i=[n(0),n(117),n(22)],void 0!==(r=function(t){"use strict";return t.Players=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var i=t.defaults(n,["onload"],t.Players);t.call(this),this._volume=this.output=new t.Volume(i.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=i.mute,this._players={},this._loadingCount=0,this._fadeIn=i.fadeIn,this._fadeOut=i.fadeOut;for(var r in e)this._loadingCount++,this.add(r,e[r],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Players),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,"state",{get:function(){var e=!1;return this._forEach(function(n){e=e||n.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,n,i){return this._players[e]=new t.Player(n,i).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(5),n(38),n(24)],void 0!==(r=function(t){"use strict";return t.Player=function(e){var n;e instanceof t.Buffer?(e=e.get(),n=t.Player.defaults):n=t.defaults(arguments,["url","onload"],t.Player),t.Source.call(this,n),this._source=null,this.autostart=n.autostart,this._buffer=new t.Buffer({url:n.url,onload:this._onload.bind(this,n.onload),reverse:n.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=n.loop,this._loopStart=n.loopStart,this._loopEnd=n.loopEnd,this._playbackRate=n.playbackRate,this.retrigger=n.retrigger,this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){e=t.defaultArg(e,t.noOp),e(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,n,i){return n=this._loop?t.defaultArg(n,this._loopStart):t.defaultArg(n,0),n=this.toSeconds(n),i=t.defaultArg(i,Math.max(this._buffer.duration-n,0)),i=this.toSeconds(i),e=this.toSeconds(e),this._source=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output),this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+i),this._loop?this._source.start(e,n):this._source.start(e,n,i),this},t.Player.prototype._stop=function(t){return this._source&&this._source.stop(this.toSeconds(t)),this},t.Player.prototype.seek=function(e,n){return n=this.toSeconds(n),this._state.getValueAtTime(n)===t.State.Started&&(e=this.toSeconds(e),this._stop(n),this._start(n,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}.apply(e,i))&&(t.exports=r)},function(t,e,n){var i,r;i=[n(0),n(5)],void 0!==(r=function(t){return t.Buffers=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var i=t.defaults(n,["onload","baseUrl"],t.Buffers);t.call(this),this._buffers={},this.baseUrl=i.baseUrl,this._loadingCount=0;for(var r in e)this._loadingCount++,this.add(r,e[r],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:""},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var n=this.get(e);t=t&&n.loaded}return t}}),t.Buffers.prototype.add=function(e,n,i){return i=t.defaultArg(i,t.noOp),n instanceof t.Buffer?(this._buffers[e]=n,i(this)):n instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(n),i(this)):t.isString(n)&&(this._buffers[e]=new t.Buffer(this.baseUrl+n,i)),this},t.Buffers.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";var i=n(120),r=function(t){return t&&t.__esModule?t:{default:t}}(i),o=n(4);AFRAME.registerComponent("listener",{tick:function(){if(o.supported){var t=this.el.object3D;t.updateMatrixWorld();var e=t.matrixWorld,n=(new THREE.Vector3).setFromMatrixPosition(e);r.default.setPosition(n.x,n.y,n.z);var i=e.clone();i.setPosition({x:0,y:0,z:0});var s=new THREE.Vector3(0,0,1);s.applyMatrix4(i),s.normalize();var a=new THREE.Vector3(0,-1,0);a.applyMatrix4(i),a.normalize(),r.default.setOrientation(s.x,s.y,s.z,a.x,a.y,a.z)}}})},function(t,e,n){var i,r;i=[n(0),n(40),n(44),n(45),n(2),n(26),n(46)],void 0!==(r=function(t){"use strict";t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],this.set(e.defaults)},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,n){if(this.context.listener.positionX){var i=this.now();this.context.listener.positionX.setTargetAtTime(t,i,this._rampTimeConstant),this.context.listener.positionY.setTargetAtTime(e,i,this._rampTimeConstant),this.context.listener.positionZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this.context.listener.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,n,i,r,o){if(this.context.listener.forwardX){var s=this.now();this.context.listener.forwardX.setTargetAtTime(t,s,this._rampTimeConstant),this.context.listener.forwardY.setTargetAtTime(e,s,this._rampTimeConstant),this.context.listener.forwardZ.setTargetAtTime(n,s,this._rampTimeConstant),this.context.listener.upX.setTargetAtTime(i,s,this._rampTimeConstant),this.context.listener.upY.setTargetAtTime(r,s,this._rampTimeConstant),this.context.listener.upZ.setTargetAtTime(o,s,this._rampTimeConstant)}else this.context.listener.setOrientation(t,e,n,i,r,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on("init",function(n){n.Listener instanceof e?t.Listener=n.Listener:t.Listener=new e,n.Listener=t.Listener}),t.Listener}.apply(e,i))&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var r=n(6),o=i(r),s=n(4),a=n(16),u=i(a),l=n(122),c=i(l);AFRAME.registerSystem("player",{init:function(){var t=this;this.players=[],this.scheduleId=0,this.sceneEl.addEventListener("menu-selection",function(e){o.default.clear(t.scheduleId);var n=(0,s.getTrackData)(e.detail.artist),i=n.duration||10;t.scheduleId=o.default.schedule(function(){t.sceneEl.emit("song-end")},i)}),c.default.change(function(t,e){u.default.mute="hidden"===e})},loading:function(){var t=this,e=!0;this.players.forEach(function(t){return e=t.isLoaded()&&e}),e&&setTimeout(function(){return t.sceneEl.emit("audio-loaded")},500)},bufferingEnd:function(){var t=!1;this.players.forEach(function(e){return t=e.isBuffering()||t}),t||this.sceneEl.emit("buffering-end")},buffering:function(){this.sceneEl.emit("buffering")}})},function(t,e,n){t.exports=n(123)},function(t,e,n){!function(e){"use strict";var i=-1,r=function(t){return t.every=function(e,n,r){t._time(),r||(r=n,n=null),i+=1;var o=i;return t._timers[o]={visible:e,hidden:n,callback:r},t._run(o,!1),t.isSupported()&&t._listen(),o},t.stop=function(e){return!!t._timers[e]&&(t._stop(e),delete t._timers[e],!0)},t._timers={},t._time=function(){t._timed||(t._timed=!0,t._wasHidden=t.hidden(),t.change(function(){t._stopRun(),t._wasHidden=t.hidden()}))},t._run=function(n,i){var r,o=t._timers[n];if(t.hidden()){if(null===o.hidden)return;r=o.hidden}else r=o.visible;var s=function(){o.last=new Date,o.callback.call(e)};if(i){var a=new Date,u=a-o.last;r>u?o.delay=setTimeout(function(){o.id=setInterval(s,r),s()},r-u):(o.id=setInterval(s,r),s())}else o.id=setInterval(s,r)},t._stop=function(e){var n=t._timers[e];clearInterval(n.id),clearTimeout(n.delay),delete n.id,delete n.delay},t._stopRun=function(e){var n=t.hidden(),i=t._wasHidden;if(n&&!i||!n&&i)for(var r in t._timers)t._stop(r),t._run(r,!n)},t};void 0!==t&&t.exports?t.exports=r(n(124)):r(e.Visibility)}(window)},function(t,e){!function(e){"use strict";var n=-1,i={onVisible:function(t){var e=i.isSupported();if(!e||!i.hidden())return t(),e;var n=i.change(function(e,r){i.hidden()||(i.unbind(n),t())});return n},change:function(t){if(!i.isSupported())return!1;n+=1;var e=n;return i._callbacks[e]=t,i._listen(),e},unbind:function(t){delete i._callbacks[t]},afterPrerendering:function(t){var e=i.isSupported();if(!e||"prerender"!=i.state())return t(),e;var n=i.change(function(e,r){"prerender"!=r&&(i.unbind(n),t())});return n},hidden:function(){return!(!i._doc.hidden&&!i._doc.webkitHidden)},state:function(){return i._doc.visibilityState||i._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!i._doc.visibilityState&&!i._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(t){var e=i.state();for(var n in i._callbacks)i._callbacks[n].call(i._doc,t,e)},_listen:function(){if(!i._init){var t="visibilitychange";i._doc.webkitVisibilityState&&(t="webkit"+t);var e=function(){i._change.apply(i,arguments)};i._doc.addEventListener?i._doc.addEventListener(t,e):i._doc.attachEvent(t,e),i._init=!0}}};void 0!==t&&t.exports?t.exports=i:e.Visibility=i}(this)},function(t,e,n){"use strict";n(1),AFRAME.registerComponent("animate",{schema:{attribute:{type:"string"},time:{type:"int",default:1e3},easing:{type:"string",default:"Linear.None"}},init:function(){var t=this;this.tween=null,this.el.addEventListener("componentchanged",function(e){t.tween||e.detail.name!==t.data.attribute||t.startAnimation(e.detail.oldData,e.detail.newData)})},startAnimation:function(t,e){var n=this,i=this.data.attribute,r=this.el,o=this.data.easing.split("."),s=TWEEN.Easing[o[0]][o[1]];this.tween=new TWEEN.Tween(t).to(e,this.data.time).onUpdate(function(){r.setAttribute(i,this)}).onComplete(function(){n.tween=null}).easing(s).start(),this.el.setAttribute(i,t)}})},function(t,e,n){"use strict";n(1),n(49),n(127),n(128),n(50),AFRAME.registerComponent("ray-intersection-emitter",{dependencies:["raycaster"],schema:{front:{type:"string"},back:{type:"string"},updatePositions:{type:"boolean",default:!1},touch:{type:"boolean",default:!1}},init:function(){var t=this;["onClick","onRaycasterIntersection","onRaycasterIntersectionCleared","onTouchEnd","onTouchStart","onTouchClick"].forEach(function(e){return t[e]=t[e].bind(t)}),this.el.setAttribute("cursor","fuse : false"),this.el.setAttribute("raycaster","far: 5; objects: .selectable; interval: 60"),this.el.addEventListener("raycaster-intersection",this.onRaycasterIntersection),this.el.addEventListener("raycaster-intersection-cleared",this.onRaycasterIntersectionCleared)},onRaycasterIntersection:function(t){if(this.back){var e=this.el.components.raycaster.intersectedEls[0];document.querySelector(this.data.back).emit("intersection-start",e)}},onRaycasterIntersectionCleared:function(t){this.back&&document.querySelector(this.data.back).emit("intersection-end")},onClick:function(){var t=this.el.components.raycaster.intersectedEls[0];t&&t.emit("click")},onTouchEnd:function(){this.data.touch&&this.el.setAttribute("raycaster","far",0)},onTouchClick:function(){this.data.touch&&this.onClick()},onTouchStart:function(){this.data.touch&&this.el.setAttribute("raycaster","far",5)},update:function(){this.data.front&&(this.frontEl=document.querySelector(this.data.front),this.front=this.frontEl.object3D,this.frontEl.addEventListener("touch-end",this.onTouchEnd),this.frontEl.addEventListener("touch-click",this.onTouchClick),this.frontEl.addEventListener("touch-start",this.onTouchStart)),this.data.back&&(this.back=document.querySelector(this.data.back).object3D,document.querySelector(this.data.back).addEventListener("controller-click",this.onClick)),this.data.touch&&this.el.setAttribute("raycaster","far",0)},tick:function(){if(this.data.updatePositions&&this.back&&this.front){var t=this.front.getWorldPosition(),e=this.back.getWorldPosition();this.el.object3D.position.copy(t),this.el.object3D.lookAt(e)}}})},function(t,e,n){"use strict";n(1),AFRAME.registerComponent("retical",{init:function(){this.el.setAttribute("geometry","primitive:ring; radius-inner: 1; radius-outer: 1.5"),this.el.setAttribute("material","color: white; transparent: true; opacity: 0.6; shader: flat"),this.el.setAttribute("scale","0.02 0.02 0.02"),this.el.setAttribute("position","0 0 -0.9")}})},function(t,e,n){"use strict";n(1),AFRAME.registerComponent("ray-controls",{schema:{hand:{type:"string",default:"right"},use:{type:"boolean",default:!1}},init:function(){var t=this,e=document.createElementWithAttributes("a-entity",{position:"0 0 -0.05",class:"tracked-ray-front-"+this.data.hand}),n=document.createElementWithAttributes("a-cylinder",{material:"color: white; transparent: true; opacity: 0.2",radius:"0.001",scale:"1 1 1",position:"0 0 -0.5",rotation:"-90 0 0"});this.frontEl=e,this.el.appendChild(e),e.appendChild(n),this.el.addEventListener("triggerdown",function(){t.el.emit("controller-click")}),this.el.addEventListener("intersection-start",function(t){n.setAttribute("material","shader: flat; opacity: 0.8");var i=t.detail.object3D.getWorldPosition().distanceTo(e.object3D.getWorldPosition());n.setAttribute("position","0 0 -"+i/2),n.setAttribute("scale","1 "+i+" 1")}),this.el.addEventListener("intersection-end",function(){n.setAttribute("material","opacity",.2),n.setAttribute("position","0 0 -0.5"),n.setAttribute("scale","1 1 1")})},update:function(){this.frontEl.setAttribute("class","tracked-ray-front-"+this.data.hand),this.el.setAttribute("visible",this.data.use)}})},,function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.findControllers=e.types=void 0;var r,o=n(20),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=n(7),u=(n(49),e.types={CURSOR:"cursor-controller",DAYDREAM:"Daydream Controller",GEAR:"Gear VR Controller",RETICAL:"retical-controller",VIVE:"OpenVR Gamepad",OCULUS_TOUCH_LEFT:"Oculus Touch (Left)",OCULUS_TOUCH_RIGHT:"Oculus Touch (Right)"}),l=(r={},i(r,u.CURSOR,"mouse-controller"),i(r,u.DAYDREAM,"custom-geavr-controller"),i(r,u.GEAR,"custom-gearvr-controller"),i(r,u.RETICAL,"retical-controller"),i(r,u.VIVE,"custom-six-dof-controller"),i(r,u.OCULUS_TOUCH_LEFT,"custom-six-dof-controller"),i(r,u.OCULUS_TOUCH_RIGHT,"custom-six-dof-controller"),r),c=e.findControllers=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length;)t.splice(0,1);if(!navigator.getGamepads)return t;for(var e=navigator.getGamepads(),n=(0,a.values)(u),i=0;i<e.length;i++)if(null!==e[i]&&e[i].id)for(var r=e[i].id,o=0;o<n.length;o++)if(r===n[o]){var s=Object.keys(u)[o];t.push({key:s,type:u[s],index:i})}return t};AFRAME.registerComponent("mouse-controller",{init:function(){var t=this,e=document.createElement("a-entity");e.setAttribute("mouse-cursor",!0),document.querySelector("a-scene").appendChild(e),setTimeout(function(){t.el.setAttribute("ray-intersection-emitter","\n                updatePositions: true;\n                front: [mouse-cursor];\n                back: [camera];\n                touch:"+(0,a.isMobile)()+";\n            ")},10)}}),AFRAME.registerComponent("retical-controller",{init:function(){var t=this;this.id=u.RETICAL;var e=document.createElement("a-entity");e.id="retical",e.setAttribute("retical",!0),this.reticalEl=e,this.cameraEl=document.querySelector("[camera]"),this.cameraEl.appendChild(e),setTimeout(function(){t.el.setAttribute("ray-intersection-emitter","front: [retical]; back: [camera]; touch:false; updatePositions: true;")},100)},remove:function(){this.cameraEl.removeChild(this.reticalEl),this.el.removeAttribute("ray-intersection-emitter")}}),AFRAME.registerComponent("custom-gearvr-controller",{schema:{controller:{type:"string",default:"gearvr"}},init:function(){var t=this;this.__emitControllerClick=this.__emitControllerClick.bind(this),this.id=u.GEAR,this.el.setAttribute(this.data.controller+"-controls",{hand:"right"}),this.el.addEventListener("triggerdown",this.__emitControllerClick),this.el.addEventListener("trackpaddown",this.__emitControllerClick),this.el.setAttribute("id","righthand"),this.el.setAttribute("ray-controls","use: true; hand: right;"),setTimeout(function(){t.el.setAttribute("ray-intersection-emitter","front: .tracked-ray-front-right; back: #righthand;")},100)},remove:function(){this.el.removeAttribute(this.data.controller+"-controls"),this.el.removeEventListener("triggerdown",this.__emitControllerClick),this.el.removeEventListener("trackpaddown",this.__emitControllerClick),this.el.setAttribute("ray-controls","use: false;"),this.el.removeAttribute("ray-intersection-emitter")},__emitControllerClick:function(){this.el.emit("controller-click")}}),AFRAME.registerComponent("custom-six-dof-controller",{schema:{numberOfControllers:{type:"number",default:1}},init:function(){this.controllerEntities=[];for(var t=0;t<this.data.numberOfControllers.length;t++)this.createController(t)},update:function(){if(this.data.numberOfControllers>this.controllerEntities.length)for(var t=this.el.children.length;t<this.data.numberOfControllers;t++)this.createController(t);else this.controllerEntities.forEach(function(t){return t.parentElement&&t.parentElement.removeChild(t)}),this.controllerEntities=[]},createController:function(t){var e=this,n=0===t?"left":"right",i=n+"hand";this.el.innerHTML+='\n\t\t\t<a-entity\n\t\t\t\tid="'+i+'"\n\t\t\t\tauto-detect-controllers="hand:'+n+'"\n\t\t\t\tray-controls="use: true; hand: '+n+';"\n\t\t\t\tcursor-component\n\t\t\t></a-entity>\n\t\t',setTimeout(function(){var t=e.el.querySelector("#"+i);if(!t)throw new Error("HAND DOESNT EXIST EVEN THOUGH JUST CREATED");t.setAttribute("ray-intersection-emitter",{front:".tracked-ray-front-"+n,back:"#"+i}),e.controllerEntities.push(t)},10)},remove:function(){this.controllerEntities.forEach(function(t){t.parentElement&&t.parentElement.removeChild(t)})}});var h=[],p=[],f=function(t){return 0===t.length&&(0,a.isMobile)()&&!(0,a.is360)()&&!(0,a.isDaydream)()},d=function(t){return 0===t.length&&(0,a.is360)()};AFRAME.registerComponent("controls",{init:function(){this.updateControls=this.updateControls.bind(this),this.ping=[],this.pong=[],this.scheduler=(0,s.default)({fps:2}),this.scheduler.on("update",this.updateControls),this.scheduler.start()},updateControls:function(){var t=this;c(this.pong);var e=(0,a.diff)((0,a.pluck)(this.ping,"type",(0,a.empty)(h)),(0,a.pluck)(this.pong,"type",(0,a.empty)(p)))||this.el.hasAttribute(l[u.RETICAL])!==f(this.pong);if(e&&(console.log("controls changed "+(0,a.pluck)(this.pong,"type")),this.ping.length||(this.el.hasAttribute(l[u.RETICAL])&&this.el.removeAttribute(l[u.RETICAL]),this.el.hasAttribute(l[u.CURSOR])&&this.el.removeAttribute(l[u.CURSOR])),this.ping.forEach(function(e){return t.el.removeAttribute(l[e.type])})),f(this.pong))return void this.el.setAttribute(l[u.RETICAL],!0);if(d(this.pong))return void this.el.setAttribute(l[u.CURSOR],!0);if(!e||!this.pong.length)return void this.el.setAttribute(l[u.VIVE],"numberOfControllers: 2");if(this.pong[0].type===u.VIVE)return this.el.setAttribute(l[u.VIVE],"numberOfControllers: "+this.pong.length),void this.resetPingPong();for(var n=0;n<this.pong.length;n++){if(this.pong[n].type.indexOf("Oculus Touch")>=0)return this.el.setAttribute(l[u.OCULUS],"numberOfControllers: 2"),void this.resetPingPong()}for(var i=0;i<this.pong.length;i++){if(this.pong[i].type===u.GEAR)return this.el.hasAttribute(l[u.RETICAL])&&this.el.removeAttribute(l[u.RETICAL]),this.el.setAttribute("custom-gearvr-controller",!0),void this.resetPingPong()}for(var r=0;r<this.pong.length;r++){if(this.pong[r].type===u.DAYDREAM)return this.el.hasAttribute(l[u.RETICAL])&&this.el.removeAttribute(l[u.RETICAL]),this.el.setAttribute("custom-gearvr-controller","controller: daydream"),void this.resetPingPong()}this.resetPingPong()},resetPingPong:function(){this.ping=this.pong,this.pong=[]},update:function(){},remove:function(){this.scheduler.dispose()}})}],[51]);